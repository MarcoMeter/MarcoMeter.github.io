<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;500&display=swap" rel="stylesheet"/>
    <script src="template/cdn.plot.ly_plotly-2.6.3.min.js"></script>
    <style>
     /* Style the body */
      html, body {
        height: 100%;
        margin: 0;
        background-color: #000;
        color: white;
        font-family: "Montserrat", sans-serif;
        min-width: 1737px;
      }

      /* Set the width and hight of the video*/
      video {
        width: 600px;
        height: 400px;
      }

      /* Style the timeline text*/
      #selector_header {
        font-weight: 200;
      }

      /* Buttons should be displayed in a row */
      buttonrow {
        display: inline;
      }

      /* Style the figures */
      #figures {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        flex-flow: row nowrap;
      }

      /* Style the tab */
      .tab {
        overflow: hidden;
        background-color: #54595f;
      }

      /* Style the buttons inside the tab */
      .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
        color: white;
      }

      /* Change background color of buttons on hover */
      .tab button:hover {
        background-color: #909090;
      }

      /* Create an active/current tablink class */
      .tab button.active {
        background-color: #838383;
      }

      /* Style the tab content */
      .tabcontent {
        display: none;
        padding: 6px 12px;
        border-top: none;
        background-color: #000;
      }

      .mediatabcontent {
        display: none;
        padding: 0 px 0 px;
        border-top: none;
        background-color: #000;
        width: 100%;
        height: 100%;
      }

      /* Style the close button */
      .topright {
        float: right;
        cursor: pointer;
        font-size: 28px;
      }

      .topright:hover {
        color: red;
      }

      /* Style of the dropdown button */
      .dropbtn {
        background-color: #17202A;
        color: white;
        padding: 16px;
        font-size: 16px;
        border: none;
      }
      
      .dropdown {
        position: relative;
        display: inline-block;
      }
      
      /* Style of the dropdown content */
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        background-color: #A6ACAF;
        z-index: 1;
      }
      
      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      .gotostepcontainer {
          margin-bottom: 10px;
      }
      
      #score-container label, #score-container input {
        display: inline-block;
      }

      /* Style of the dropdown at hover */
      .dropdown-content a:hover {background-color: #ddd;}
      
      .dropdown:hover .dropdown-content {display: block;}
      
      .dropdown:hover .dropbtn {background-color: #161515;}
    </style>
  </head>
  <body>
    <!--- Define tabs -->
    <div class="tab">
      <button class="tablinks" onclick="location.href='../index.html'">Back</button>
      <button class="tablinks" onclick="openTab(event, 'Environment')">Environment</button>
      <button class="tablinks" onclick="openTab(event, 'Sampler')">Sampler</button>
      <button class="tablinks" onclick="openTab(event, 'Hyperparameters')">Hyperparameters</button>
      <button class="tablinks" onclick="openTab(event, 'Model')">Model</button>
      <button class="tablinks" onclick="openTab(event, 'Media')" id="defaultOpen">Media</button>
    </div>

    <!--- Define tab content -->
    <div id="Environment" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>type</b>: MemoryGym<br><b>name</b>: MysteryPath-Grid-v0<br><b>frame_skip</b>: 1<br><b>last_action_to_obs</b>: False<br><b>last_reward_to_obs</b>: False<br><b>obs_stacks</b>: 1<br><b>grayscale</b>: False<br><b>resize_vis_obs</b>: [84, 84]<br><b>positional_encoding</b>: False<br><b>reset_params</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>start-seed</b>: 200002<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num-seeds</b>: 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>agent_scale</b>: 0.25<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>cardinal_origin_choice</b>: [0, 1, 2, 3]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>show_origin</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>show_goal</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>visual_feedback</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_goal</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_fall_off</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_path_progress</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>seed</b>: 200002<br><b>reward_normalization</b>: 0<br>
    </div>

    <div id="Model" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>load_model</b>: False<br><b>model_path</b>: <br><b>checkpoint_interval</b>: 500<br><b>activation</b>: relu<br><b>vis_encoder</b>: cnn<br><b>vec_encoder</b>: linear<br><b>num_vec_encoder_units</b>: 128<br><b>hidden_layer</b>: default<br><b>num_hidden_layers</b>: 1<br><b>num_hidden_units</b>: 256<br><b>transformer</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num_blocks</b>: 2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>embed_dim</b>: 256<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num_heads</b>: 4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>memory_length</b>: 96<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>positional_encoding</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>layer_norm</b>: pre<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>init_weights</b>: xavier<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>gtrxl</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>gtrxl_bias</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>gtrxl_swap</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>share_heads</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_episode_steps</b>: 129<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>add_positional_encoding_to_query</b>: False<br>
    </div>

    <div id="Sampler" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>n_workers</b>: 32<br><b>worker_steps</b>: 512<br>
    </div>

    <div id="Hyperparameters" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>algorithm</b>: PPO<br><b>resume_at</b>: 0<br><b>gamma</b>: 0.995<br><b>lamda</b>: 0.95<br><b>updates</b>: 10000<br><b>epochs</b>: 3<br><b>refresh_buffer_epoch</b>: -1<br><b>n_mini_batches</b>: 8<br><b>advantage_normalization</b>: no<br><b>value_coefficient</b>: 0.5<br><b>max_grad_norm</b>: 0.25<br><b>share_parameters</b>: True<br><b>learning_rate_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.000275<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 1e-05<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 10000<br><b>beta_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.001<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 1e-06<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 10000<br><b>clip_range_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 0.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 10000<br><b>obs_reconstruction_schedule</b>: {'initial': 0.0}<br>
    </div>

    <div id="Media" class="mediatabcontent">
      <br>
      <center>
        <div id="figures" style="display: flex; flex-direction: column;">
          <div style="display: flex; flex-direction: row;">
            <div style="display: flex; flex-direction: column;">
              <div style="display: flex; flex-direction: row;">
                <label for="video_speed">Frame Rate: </label>
                <input type="text" id="video_speed" size="3" value="6" onkeydown="set_video_speed(event)">
              </div>

              <div style="display: flex; flex-direction: row;">
                <label for="show_ground_truth">Show Ground Truth Estimation</label>
                <input type="checkbox" id="show_ground_truth" onclick="show_ground_truth()">
              </div>

              <div style="display: flex; flex-direction: row;">
                <label for="show_decoder_video">Show Decoder Video</label>
                <input type="checkbox" id="show_decoder_video" onclick="show_decoder_video()">
              </div>

            <div style="display: flex; flex-direction: row;">
              <label for="show_agent_video">Show Agent Video</label>
              <input type="checkbox" id="show_agent_video" onclick="show_agent_video()">
            </div>
          </div>
          
            <div>
              <video id="video_player">
                <source src="" type="video/webm" />
              </video>
            </div>
            <div id="action_distr"></div>
          </div>
        </div>

        <br>
        <!-- Set buttons to control the figures -->
        <div class="gotostepcontainer">
          <label for="gotostep_text">Step:</label>
          <input type="text" id="gotostep_text" size="3" value="0" onkeydown="go_to_step(event)">
          <button id="return_button" type="return_button" onclick="return_to_step()">Return to step 0</button>
        </div>
        <buttonrow>
          <button id="play_pause_button" onclick="play_pause()" style="width:53px">Play</button>
          <button id="reset_button" onclick="reset()">Reset</button>
          <button id="back_button" onclick="back()">Back</button>
          <button id="next_button" onclick="next()">Next</button>
          <button id="stats_button" onclick="statistic()">Attention Scores</button>
        </buttonrow>
        <br>
        <!-- Set slider to control the figures -->
        <input id="time_selector" type="range" min="0" max="100" step="1" value="0" style="width: 300px;"/>

        <!-- Set transformer plot -->
        <div id="score-container">
          <label for="top_n_scores">Number of Top Attention Scores:</label>
          <input type="text" id="top_n_scores" size="3" value="-1" onkeydown="top_scores()">
        </div>
        <div id="transformer"></div>

        <!-- Set value plot and entropy plot -->
        <div id="figures">
          <div id="value_func"></div>
          <div id="entropy_func"></div>
          <!-- Dropdown button with some options-->
          <div class="dropdown" id="options">
            <button class="dropbtn">Options</button>
            <div class="dropdown-content" id="dropdown_content">
              <a href ="#" onclick="marker('value')">value_marker_toggle</a>
              <a href ="#" onclick="marker('entropy')">entropy_marker_toggle</a>
              <a href="#" id="all" onclick="set_action_space('all')">All</a>
            </div>
          </div>
        </div>
      </center>
    </div>

    <script>
        // Set active tab
        document.getElementById("defaultOpen").click();

        // Set video player
        const video_player = document.getElementById("video_player");
        const video_speed = document.getElementById("video_speed");
        const video_path = ['videos/video_seed_200002_147.webm', '', '', '', 'videos/video_seed_200002_148.webm', ''];
        var render_id = 0; var render_gt_id = 1; var render_decoder_id = 2; var render_decoder_gt_id = 3; var  render_agent_id = 4; var render_agent_gt_id = 5;
        var video_id = 0;
        // Hide video player if there is no ground truth video
        if (video_path[render_gt_id].length == 0 && video_path[render_decoder_gt_id].length == 0 && video_path[render_agent_gt_id].length == 0){
          document.querySelector('label[for="show_ground_truth"]').style.display = 'none';
          document.getElementById("show_ground_truth").style.display = 'none';
        } 
        if (video_path[render_decoder_id].length == 0){
          document.querySelector('label[for="show_decoder_video"]').style.display = 'none';
          document.getElementById("show_decoder_video").style.display = 'none';
        }
        if (video_path[render_agent_id].length == 0){
          document.querySelector('label[for="show_agent_video"]').style.display = 'none';
          document.getElementById("show_agent_video").style.display = 'none';
        }

        video_player.querySelector("source").src = video_path[0];
        video_player.load();
        var video_length = 0;

        // Play and pause button
        const play_pause_button = document.getElementById("play_pause_button");

        // Set step input
        const gotostep_text = document.getElementById('gotostep_text');
        var past_steps = [0];
        var step = 0;

        // Set number of scores input
        const top_n_scores = document.getElementById('top_n_scores');

        // Const stats button
        const stats_button = document.getElementById("stats_button");

        // Set time selector
        const time_selector = document.getElementById('time_selector');
        var tS_step_size = 1.0;

        // Set values for the plots
        var y_values = [[0.9103164672851562], [0.8663522005081177], [0.8730471730232239], [0.8829092383384705], [0.8433080911636353], [0.8470691442489624], [0.8478507399559021], [0.8738535046577454], [0.8818773627281189], [0.8972712755203247], [0.916614294052124], [0.8927434682846069], [0.8897198438644409], [0.9060918092727661], [0.927418053150177], [0.9066276550292969], [0.9174066185951233], [0.9158146977424622], [0.9178758859634399], [0.9231082797050476], [0.947694718837738], [0.956378161907196], [0.9262385368347168], [0.9240753650665283], [0.9353667497634888], [0.9480791091918945], [0.9608616232872009], [0.9515119194984436], [0.9442968368530273], [0.9482647180557251], [0.9570178985595703], [0.962437629699707], [0.9699697494506836], [0.9845202565193176], [0.985601007938385], [0.9944204688072205], [0.9340553879737854]];
        var y_entropy = [[0.13978226482868195], [0.0009229946881532669], [2.2103563424025197e-06], [5.1727511163335294e-05], [0.18404613435268402], [0.04415801540017128], [0.0004518144705798477], [3.907811787939863e-06], [0.00011536080273799598], [0.00027506815968081355], [0.0011461093090474606], [0.2706802487373352], [0.00032906437991186976], [1.9394158812247042e-07], [1.891454121505376e-05], [1.7649044821155258e-05], [2.1675771222362528e-06], [0.06942524760961533], [5.899872803638573e-07], [0.00035281165037304163], [0.0032436614856123924], [0.00019908201647922397], [0.10646607726812363], [3.4174544083498404e-08], [6.673000825685449e-06], [6.419011100433636e-08], [6.584444236068521e-06], [5.818343424834893e-07], [0.00015400821575894952], [0.0020784989465028048], [0.000618472695350647], [0.00019953996525146067], [0.005838259123265743], [2.6136758606298827e-06], [3.393266752027557e-07], [1.8417945284454618e-06], [0.5743501782417297]];
        var y_attention_weights = [[[], []], [[1.0], [1.0]], [[0.6600156426429749, 0.3399844169616699], [0.697783350944519, 0.30221664905548096]], [[0.40990644693374634, 0.18018704652786255, 0.40990644693374634], [0.5070428848266602, 0.1726343333721161, 0.32032275199890137]], [[0.3515757918357849, 0.13358348608016968, 0.3515757918357849, 0.16326487064361572], [0.3982941210269928, 0.0901867151260376, 0.18742744624614716, 0.32409170269966125]], [[0.12530487775802612, 0.07309432327747345, 0.12530487775802612, 0.17616814374923706, 0.5001277923583984], [0.4058210849761963, 0.11059409379959106, 0.163374662399292, 0.2721063792705536, 0.048103779554367065]], [[0.0957530289888382, 0.11879566311836243, 0.0957530289888382, 0.2230719029903412, 0.24355448782444, 0.2230719029903412], [0.3761557936668396, 0.09055852144956589, 0.13895690441131592, 0.1983879953622818, 0.03697872534394264, 0.15896201133728027]], [[0.10190276801586151, 0.18085381388664246, 0.10190276801586151, 0.19082164764404297, 0.21056081354618073, 0.19082164764404297, 0.023136509582400322], [0.3632439970970154, 0.06735751032829285, 0.14475610852241516, 0.2230025976896286, 0.02880639210343361, 0.13105206191539764, 0.041781339794397354]], [[0.05489335209131241, 0.046120673418045044, 0.05489335209131241, 0.12467902153730392, 0.1937466859817505, 0.12467902153730392, 0.03830350935459137, 0.36268433928489685], [0.3744206428527832, 0.056754786521196365, 0.12225104868412018, 0.24617724120616913, 0.019582029432058334, 0.116993747651577, 0.027926351875066757, 0.03589417040348053]], [[0.08604410290718079, 0.02614753507077694, 0.08604410290718079, 0.04507390782237053, 0.30628782510757446, 0.04507390782237053, 0.06005822494626045, 0.08877778053283691, 0.2564926743507385], [0.34339481592178345, 0.05790784955024719, 0.13825161755084991, 0.1964438259601593, 0.02256884053349495, 0.1123148575425148, 0.02555946260690689, 0.03204021602869034, 0.07151851058006287]], [[0.11972111463546753, 0.05170763283967972, 0.11972111463546753, 0.015627073124051094, 0.3290534019470215, 0.015627073124051094, 0.03217006474733353, 0.026387114077806473, 0.034940578043460846, 0.25504475831985474], [0.31698036193847656, 0.031883735209703445, 0.1071811094880104, 0.09714142978191376, 0.01880408450961113, 0.06550980359315872, 0.017438607290387154, 0.02442217990756035, 0.03376166149973869, 0.28687697649002075]], [[0.12038871645927429, 0.05066327750682831, 0.12038871645927429, 0.03307817876338959, 0.09245599806308746, 0.03307817876338959, 0.053204286843538284, 0.040275875478982925, 0.11125568300485611, 0.24285808205604553, 0.10235298424959183], [0.3207266926765442, 0.023039542138576508, 0.10651738941669464, 0.04825248941779137, 0.015435176901519299, 0.025295661762356758, 0.011778157204389572, 0.013823840767145157, 0.017059534788131714, 0.0460103340446949, 0.3720611333847046]], [[0.031765539199113846, 0.04715332016348839, 0.031765539199113846, 0.07281023263931274, 0.09874684363603592, 0.07281023263931274, 0.043962765485048294, 0.06378977000713348, 0.05892067402601242, 0.2557853162288666, 0.01959691196680069, 0.20289288461208344], [0.3063781261444092, 0.02439914271235466, 0.0941491425037384, 0.040298622101545334, 0.015378277748823166, 0.0538373701274395, 0.01805945299565792, 0.01822741888463497, 0.024352002888917923, 0.052684977650642395, 0.3183876872062683, 0.03384779393672943]], [[0.01867074705660343, 0.05915900319814682, 0.01867074705660343, 0.03997183218598366, 0.07236845046281815, 0.03997183218598366, 0.004932458512485027, 0.0251518115401268, 0.08524011075496674, 0.33312535285949707, 0.030536042526364326, 0.26726916432380676, 0.004932458512485027], [0.2712402939796448, 0.023348383605480194, 0.09983405470848083, 0.06385870277881622, 0.01279795914888382, 0.036491043865680695, 0.011793103069067001, 0.017471494153141975, 0.024982107803225517, 0.04034586623311043, 0.3569764196872711, 0.029977956786751747, 0.010882668197154999]], [[0.014011894352734089, 0.014076614752411842, 0.014011894352734089, 0.007563348859548569, 0.06624294817447662, 0.007563348859548569, 0.007529702037572861, 0.052376020699739456, 0.04649260267615318, 0.3324143886566162, 0.16655683517456055, 0.21125462651252747, 0.007529702037572861, 0.052376020699739456], [0.27457600831985474, 0.021308619529008865, 0.0979655459523201, 0.04162110015749931, 0.013040701858699322, 0.01831730455160141, 0.00856214202940464, 0.011077815666794777, 0.018844733014702797, 0.026060357689857483, 0.4235253632068634, 0.028714455664157867, 0.007681668270379305, 0.00870418269187212]], [[0.011228772811591625, 0.0034626047126948833, 0.011228772811591625, 0.004679134115576744, 0.03459452837705612, 0.004679134115576744, 0.005128041375428438, 0.005756785161793232, 0.028567694127559662, 0.1558389514684677, 0.3039354979991913, 0.39144760370254517, 0.005128041375428438, 0.005756785161793232, 0.028567694127559662], [0.21634963154792786, 0.027874018996953964, 0.09067028760910034, 0.03915977105498314, 0.0188504196703434, 0.024476617574691772, 0.012258593924343586, 0.013627059757709503, 0.023990297690033913, 0.03867196664214134, 0.4159741997718811, 0.03477901965379715, 0.011098576709628105, 0.011828380636870861, 0.020391147583723068]], [[0.010967028327286243, 0.007427777163684368, 0.010967028327286243, 0.0031187960412353277, 0.04380426183342934, 0.0031187960412353277, 0.0054766335524618626, 0.004889027215540409, 0.011957862414419651, 0.10728217661380768, 0.12922713160514832, 0.532157838344574, 0.0054766335524618626, 0.004889027215540409, 0.011957862414419651, 0.10728217661380768], [0.2164851278066635, 0.027720943093299866, 0.08569050580263138, 0.0475066713988781, 0.01751634106040001, 0.02151368372142315, 0.01354802306741476, 0.01733304187655449, 0.026729736477136612, 0.03628707677125931, 0.3538200557231903, 0.034527312964200974, 0.011655878275632858, 0.014170578680932522, 0.02229786105453968, 0.05319710820913315]], [[0.043771617114543915, 0.01578959822654724, 0.043771617114543915, 0.011453764513134956, 0.042936015874147415, 0.011453764513134956, 0.004037213511765003, 0.006723275873810053, 0.004809874575585127, 0.11860290914773941, 0.11557737737894058, 0.3313222825527191, 0.004037213511765003, 0.006723275873810053, 0.004809874575585127, 0.11860290914773941, 0.11557737737894058], [0.2385876178741455, 0.024153493344783783, 0.10020242631435394, 0.035073067992925644, 0.01784798875451088, 0.01622936502099037, 0.009452341124415398, 0.011747733689844608, 0.018104201182723045, 0.016000397503376007, 0.22147458791732788, 0.031146805733442307, 0.007684934418648481, 0.0078051406890153885, 0.013500140979886055, 0.026623819023370743, 0.20436590909957886]], [[0.07651295512914658, 0.022718973457813263, 0.07651295512914658, 0.028411056846380234, 0.09788782149553299, 0.028411056846380234, 0.002247052965685725, 0.003416248830035329, 0.00589958718046546, 0.11632747203111649, 0.03089316189289093, 0.29962748289108276, 0.002247052965685725, 0.003416248830035329, 0.00589958718046546, 0.11632747203111649, 0.03089316189289093, 0.052350617945194244], [0.23078086972236633, 0.022208288311958313, 0.09046133607625961, 0.022542599588632584, 0.020214878022670746, 0.011312992312014103, 0.010657777078449726, 0.009259616024792194, 0.015378094278275967, 0.019231904298067093, 0.21065549552440643, 0.02521554008126259, 0.00937624741345644, 0.00904033612459898, 0.013396491296589375, 0.024975230917334557, 0.1250765174627304, 0.13021577894687653]], [[0.02024548500776291, 0.008324717171490192, 0.02024548500776291, 0.002831348218023777, 0.022079410031437874, 0.002831348218023777, 0.0028319554403424263, 0.004313370678573847, 0.009789127856492996, 0.08872748911380768, 0.06636177748441696, 0.3578414022922516, 0.0028319554403424263, 0.004313370678573847, 0.009789127856492996, 0.08872748911380768, 0.06636177748441696, 0.06937012076377869, 0.1521831750869751], [0.21417918801307678, 0.020025482401251793, 0.0907292515039444, 0.02746216207742691, 0.016113154590129852, 0.022134888917207718, 0.010558560490608215, 0.009119682013988495, 0.012615147046744823, 0.016166452318429947, 0.11800325661897659, 0.025155242532491684, 0.011404587887227535, 0.009424321353435516, 0.01379561796784401, 0.019501591101288795, 0.12544074654579163, 0.07264108210802078, 0.16552960872650146]], [[0.021133681759238243, 0.010196780785918236, 0.021133681759238243, 0.004017456900328398, 0.027545791119337082, 0.004017456900328398, 0.004490534774959087, 0.008430707268416882, 0.013009459711611271, 0.07134482264518738, 0.020651843398809433, 0.40496957302093506, 0.004490534774959087, 0.008430707268416882, 0.013009459711611271, 0.07134482264518738, 0.020651843398809433, 0.043022412806749344, 0.13787400722503662, 0.09023445844650269], [0.22613513469696045, 0.018073147162795067, 0.07523778080940247, 0.021032433956861496, 0.011369384825229645, 0.018980076536536217, 0.011273358017206192, 0.01165897399187088, 0.015416566282510757, 0.027931999415159225, 0.12539468705654144, 0.022945180535316467, 0.01168565172702074, 0.010120115242898464, 0.013195564039051533, 0.024465087801218033, 0.13871325552463531, 0.04761861637234688, 0.11318935453891754, 0.05556366592645645]], [[0.016079682856798172, 0.006275984458625317, 0.016079682856798172, 0.002678564051166177, 0.04228930175304413, 0.002678564051166177, 0.0019262395799160004, 0.008456462062895298, 0.009879754856228828, 0.06444130837917328, 0.019475188106298447, 0.339199423789978, 0.0019262395799160004, 0.008456462062895298, 0.009879754856228828, 0.06444130837917328, 0.019475188106298447, 0.032100215554237366, 0.18400602042675018, 0.08027644455432892, 0.06997817009687424], [0.2035827487707138, 0.014754576608538628, 0.06878336519002914, 0.016446009278297424, 0.010141872800886631, 0.011386465281248093, 0.008582014590501785, 0.008103549480438232, 0.010497447103261948, 0.010631847195327282, 0.12756605446338654, 0.01765921711921692, 0.008303254842758179, 0.007481198757886887, 0.009871223010122776, 0.010660584084689617, 0.07377060502767563, 0.0493163987994194, 0.11124197393655777, 0.04789167642593384, 0.1733279675245285]], [[0.0161152184009552, 0.013513388112187386, 0.0161152184009552, 0.003417125903069973, 0.031092964112758636, 0.003417125903069973, 0.05970771983265877, 0.03880593925714493, 0.026463184505701065, 0.036138735711574554, 0.0826420858502388, 0.08809949457645416, 0.05970771983265877, 0.03880593925714493, 0.026463184505701065, 0.036138735711574554, 0.0826420858502388, 0.042002853006124496, 0.07513008266687393, 0.07611656934022903, 0.051516659557819366, 0.0959479808807373], [0.2559913694858551, 0.014369609765708447, 0.07907500863075256, 0.017688268795609474, 0.01012059673666954, 0.010323201306164265, 0.005446398165076971, 0.007128419820219278, 0.009118590503931046, 0.008641397580504417, 0.07448732107877731, 0.016813479363918304, 0.004997211508452892, 0.005330085754394531, 0.008285869844257832, 0.009942247532308102, 0.041694555431604385, 0.04331924766302109, 0.08008100092411041, 0.028973234817385674, 0.07309755682945251, 0.19507533311843872]], [[0.03341773897409439, 0.015281323343515396, 0.03341773897409439, 0.013917030766606331, 0.2790720462799072, 0.013917030766606331, 0.013825958594679832, 0.005760178901255131, 0.011446336284279823, 0.05185406655073166, 0.030935069546103477, 0.08448281139135361, 0.013825958594679832, 0.005760178901255131, 0.011446336284279823, 0.05185406655073166, 0.030935069546103477, 0.01565559208393097, 0.04846880957484245, 0.010846519842743874, 0.017779171466827393, 0.10967191308736801, 0.09642910212278366], [0.21117112040519714, 0.015184503048658371, 0.06427328288555145, 0.017911074683070183, 0.009262672625482082, 0.016779843717813492, 0.0070704384706914425, 0.012003624811768532, 0.012392211705446243, 0.010758975520730019, 0.059833966195583344, 0.019914239645004272, 0.006253564730286598, 0.009028350934386253, 0.011812245473265648, 0.01092839241027832, 0.031884003430604935, 0.048321936279535294, 0.08823946863412857, 0.030136559158563614, 0.09776240587234497, 0.19071945548057556, 0.01835772953927517]], [[0.019272737205028534, 0.0296956654638052, 0.019272737205028534, 0.047310635447502136, 0.057525526732206345, 0.047310635447502136, 0.028265077620744705, 0.03637053817510605, 0.032677777111530304, 0.09598106145858765, 0.009217126294970512, 0.10112126916646957, 0.028265077620744705, 0.03637053817510605, 0.032677777111530304, 0.09598106145858765, 0.009217126294970512, 0.012335890904068947, 0.04580678045749664, 0.01487819291651249, 0.0070992643013596535, 0.06571556627750397, 0.08032131940126419, 0.047310635447502136], [0.23362664878368378, 0.013799810782074928, 0.06351249665021896, 0.019802145659923553, 0.008949514478445053, 0.020429668948054314, 0.007840988226234913, 0.009610682725906372, 0.010926254093647003, 0.01223807130008936, 0.04948253557085991, 0.017331738024950027, 0.008518733084201813, 0.009130868129432201, 0.009901919402182102, 0.009920116513967514, 0.0492478683590889, 0.030856359750032425, 0.08004749566316605, 0.029502205550670624, 0.09564926475286484, 0.1732085645198822, 0.016991503536701202, 0.01947450079023838]], [[0.009731031022965908, 0.034718871116638184, 0.009731031022965908, 0.02306302823126316, 0.04044179618358612, 0.02306302823126316, 0.002596514765173197, 0.012371144257485867, 0.034456975758075714, 0.10487265884876251, 0.011496753431856632, 0.13579075038433075, 0.002596514765173197, 0.012371144257485867, 0.034456975758075714, 0.10487265884876251, 0.011496753431856632, 0.02688324823975563, 0.09273023903369904, 0.02520805597305298, 0.009338194504380226, 0.10511387139558792, 0.10693921148777008, 0.02306302823126316, 0.002596514765173197], [0.21466097235679626, 0.013720519840717316, 0.06687228381633759, 0.024558311328291893, 0.007967408746480942, 0.012860794551670551, 0.006226403638720512, 0.010340317152440548, 0.013541736640036106, 0.008237747475504875, 0.04304562881588936, 0.015652045607566833, 0.004489556886255741, 0.0070775896310806274, 0.008210057392716408, 0.0064523303881287575, 0.03061690740287304, 0.04794339835643768, 0.09896201640367508, 0.021621432155370712, 0.08001051843166351, 0.2210478037595749, 0.016292767599225044, 0.013296816498041153, 0.006294612772762775]], [[0.009747972711920738, 0.009396339766681194, 0.009747972711920738, 0.004556703381240368, 0.044867370277643204, 0.004556703381240368, 0.004540496040135622, 0.02594987489283085, 0.02306385710835457, 0.11927581578493118, 0.07624337822198868, 0.1323075145483017, 0.004540496040135622, 0.02594987489283085, 0.02306385710835457, 0.11927581578493118, 0.07624337822198868, 0.022111745551228523, 0.0724838525056839, 0.05072461813688278, 0.010535377077758312, 0.07457311451435089, 0.02119680866599083, 0.004556703381240368, 0.004540496040135622, 0.02594987489283085], [0.2154311090707779, 0.0123311597853899, 0.06550945341587067, 0.018083080649375916, 0.008087405003607273, 0.00735181150957942, 0.004710518755018711, 0.0062635513022542, 0.010561734437942505, 0.005930489860475063, 0.0599505677819252, 0.014910798519849777, 0.0033988049253821373, 0.004102911334484816, 0.00672560092061758, 0.004587528761476278, 0.035706859081983566, 0.06595718115568161, 0.07921327650547028, 0.019438449293375015, 0.07115128636360168, 0.2400190532207489, 0.018520064651966095, 0.0111756706610322, 0.004986884538084269, 0.005894740577787161]], [[0.006407193839550018, 0.0016980182845145464, 0.006407193839550018, 0.0012330051977187395, 0.018719185143709183, 0.0012330051977187395, 0.0025176394265145063, 0.002499697729945183, 0.007067250087857246, 0.02772139571607113, 0.12077764421701431, 0.21296587586402893, 0.0025176394265145063, 0.002499697729945183, 0.007067250087857246, 0.02772139571607113, 0.12077764421701431, 0.03986034914851189, 0.1086135283112526, 0.03873508423566818, 0.04449477791786194, 0.08171040564775467, 0.10343756526708603, 0.0012330051977187395, 0.0025176394265145063, 0.002499697729945183, 0.007067250087857246], [0.18445420265197754, 0.014982995577156544, 0.06348710507154465, 0.01742612011730671, 0.010487447492778301, 0.010369670577347279, 0.006005281116813421, 0.0070442259311676025, 0.01164169330149889, 0.009483919478952885, 0.059209372848272324, 0.017886612564325333, 0.004715953022241592, 0.005498630926012993, 0.00834741722792387, 0.005775712430477142, 0.02790188044309616, 0.06483933329582214, 0.08385996520519257, 0.02248389460146427, 0.07021498680114746, 0.23698300123214722, 0.019979367032647133, 0.012828129343688488, 0.006352512631565332, 0.007315861061215401, 0.010424718260765076]], [[0.004626702517271042, 0.0018489962676540017, 0.004626702517271042, 0.0012120864121243358, 0.028342559933662415, 0.0012120864121243358, 0.0010396080324426293, 0.0017299986211583018, 0.003923769574612379, 0.039002902805805206, 0.023120317608118057, 0.3480667471885681, 0.0010396080324426293, 0.0017299986211583018, 0.003923769574612379, 0.039002902805805206, 0.023120317608118057, 0.048168305307626724, 0.08232218027114868, 0.05363691970705986, 0.07516071200370789, 0.09131503105163574, 0.07491942495107651, 0.0012120864121243358, 0.0010396080324426293, 0.0017299986211583018, 0.003923769574612379, 0.039002902805805206], [0.17458488047122955, 0.015700187534093857, 0.06227559968829155, 0.019603945314884186, 0.01049443893134594, 0.00952814519405365, 0.0066049909219145775, 0.008630979806184769, 0.012249460443854332, 0.009648275561630726, 0.07035624980926514, 0.01736091449856758, 0.005209895316511393, 0.006228815298527479, 0.009217256680130959, 0.006776479538530111, 0.04472241923213005, 0.06119966134428978, 0.07013219594955444, 0.026564881205558777, 0.09355784207582474, 0.19087378680706024, 0.020057057961821556, 0.013668050989508629, 0.00658752815797925, 0.00808323547244072, 0.01131597813218832, 0.008766822516918182]], [[0.017449844628572464, 0.005531945265829563, 0.017449844628572464, 0.005382528994232416, 0.024940883740782738, 0.005382528994232416, 0.0021810780744999647, 0.0034939416218549013, 0.0023791941348463297, 0.05512324348092079, 0.0183853842318058, 0.24497666954994202, 0.0021810780744999647, 0.0034939416218549013, 0.0023791941348463297, 0.05512324348092079, 0.0183853842318058, 0.016649357974529266, 0.23462443053722382, 0.013428477570414543, 0.017380770295858383, 0.06399256736040115, 0.08273907005786896, 0.005382528994232416, 0.0021810780744999647, 0.0034939416218549013, 0.0023791941348463297, 0.05512324348092079, 0.0183853842318058], [0.18843328952789307, 0.014627567492425442, 0.07217732816934586, 0.016204794868826866, 0.011659285984933376, 0.00851027388125658, 0.005876319482922554, 0.006501700729131699, 0.009414326399564743, 0.00675626564770937, 0.07159373164176941, 0.015138711780309677, 0.0043385764583945274, 0.00395926833152771, 0.0059229424223303795, 0.006536602973937988, 0.03288421034812927, 0.04584118351340294, 0.08814549446105957, 0.03213191777467728, 0.07635915279388428, 0.19174715876579285, 0.01564113423228264, 0.013427929021418095, 0.005517469719052315, 0.005300816148519516, 0.0070747085846960545, 0.006226504221558571, 0.032051365822553635]], [[0.029592402279376984, 0.00564692122861743, 0.029592402279376984, 0.01032921951264143, 0.023493897169828415, 0.01032921951264143, 0.0009911933448165655, 0.0014877616195008159, 0.002381372032687068, 0.04756484553217888, 0.008929451927542686, 0.07935600727796555, 0.0009911933448165655, 0.0014877616195008159, 0.002381372032687068, 0.04756484553217888, 0.008929451927542686, 0.014489900320768356, 0.09121940284967422, 0.026947226375341415, 0.017887791618704796, 0.10697916150093079, 0.34525352716445923, 0.01032921951264143, 0.0009911933448165655, 0.0014877616195008159, 0.002381372032687068, 0.04756484553217888, 0.008929451927542686, 0.014489900320768356], [0.16867618262767792, 0.014740623533725739, 0.06404167413711548, 0.01588968001306057, 0.014196059666574001, 0.007066298741847277, 0.006816443055868149, 0.005996677093207836, 0.009970046579837799, 0.008089706301689148, 0.06937289983034134, 0.014853009022772312, 0.004801267758011818, 0.004697788972407579, 0.006420978344976902, 0.006249370519071817, 0.023380586877465248, 0.03577999770641327, 0.08084337413311005, 0.0267578586935997, 0.0737529993057251, 0.19917525351047516, 0.0196833573281765, 0.008317789062857628, 0.006401034537702799, 0.006372872740030289, 0.00782934483140707, 0.006936909630894661, 0.025381993502378464, 0.057507842779159546]], [[0.008498631417751312, 0.004020335618406534, 0.008498631417751312, 0.0015260603977367282, 0.009039895609021187, 0.0015260603977367282, 0.001311146654188633, 0.0024265905376523733, 0.004308084957301617, 0.04061221331357956, 0.021576769649982452, 0.1360953450202942, 0.001311146654188633, 0.0024265905376523733, 0.004308084957301617, 0.04061221331357956, 0.021576769649982452, 0.02352430298924446, 0.05413971468806267, 0.03155844286084175, 0.03853169083595276, 0.14930559694766998, 0.24384070932865143, 0.0015260603977367282, 0.001311146654188633, 0.0024265905376523733, 0.004308084957301617, 0.04061221331357956, 0.021576769649982452, 0.02352430298924446, 0.05413971468806267], [0.1589847356081009, 0.012739501893520355, 0.06179186329245567, 0.016666311770677567, 0.010199309326708317, 0.012210163287818432, 0.006878013722598553, 0.006206146441400051, 0.008454794064164162, 0.008200419135391712, 0.04515857994556427, 0.0158527959138155, 0.006708283443003893, 0.005534372758120298, 0.0077209328301250935, 0.006955696735531092, 0.028663869947195053, 0.03170390427112579, 0.0549316443502903, 0.0258932001888752, 0.07319649308919907, 0.16728711128234863, 0.017493780702352524, 0.01592063717544079, 0.007538477890193462, 0.006436723750084639, 0.008608723990619183, 0.007001087535172701, 0.027546003460884094, 0.04072372987866402, 0.09679272770881653]], [[0.006563646253198385, 0.0036554757971316576, 0.006563646253198385, 0.002110093832015991, 0.008524037897586823, 0.002110093832015991, 0.0021397832315415144, 0.004354077856987715, 0.006368521135300398, 0.035317324101924896, 0.009136923588812351, 0.11631113290786743, 0.0021397832315415144, 0.004354077856987715, 0.006368521135300398, 0.035317324101924896, 0.009136923588812351, 0.019871540367603302, 0.052626725286245346, 0.025707639753818512, 0.03810379281640053, 0.15619458258152008, 0.28939172625541687, 0.002110093832015991, 0.0021397832315415144, 0.004354077856987715, 0.006368521135300398, 0.035317324101924896, 0.009136923588812351, 0.019871540367603302, 0.052626725286245346, 0.025707639753818512], [0.1675863265991211, 0.011135932989418507, 0.051759831607341766, 0.013285903260111809, 0.007277917116880417, 0.010142828337848186, 0.00656796945258975, 0.007307750638574362, 0.009645878337323666, 0.012583480216562748, 0.045998260378837585, 0.014172762632369995, 0.00644993782043457, 0.005827201064676046, 0.007196140941232443, 0.008404653519392014, 0.029075685888528824, 0.02261594496667385, 0.04401658475399017, 0.02538469061255455, 0.08348147571086884, 0.17596907913684845, 0.013754572719335556, 0.011110587045550346, 0.007135275285691023, 0.006726180203258991, 0.008490214124321938, 0.007365780882537365, 0.02812276966869831, 0.038793761283159256, 0.0764981359243393, 0.03611644357442856]], [[0.009128308854997158, 0.004108293913304806, 0.009128308854997158, 0.0027682187501341105, 0.007944672368466854, 0.0027682187501341105, 0.0025257759261876345, 0.0030563296750187874, 0.007600462529808283, 0.020320143550634384, 0.02305595576763153, 0.09733704477548599, 0.0025257759261876345, 0.0030563296750187874, 0.007600462529808283, 0.020320143550634384, 0.02305595576763153, 0.03640243411064148, 0.06538847833871841, 0.037567950785160065, 0.08026545494794846, 0.10596019774675369, 0.14916393160820007, 0.0027682187501341105, 0.0025257759261876345, 0.0030563296750187874, 0.007600462529808283, 0.020320143550634384, 0.02305595576763153, 0.03640243411064148, 0.06538847833871841, 0.037567950785160065, 0.08026545494794846], [0.10968482494354248, 0.01105367112904787, 0.048696696758270264, 0.016924569383263588, 0.008631223812699318, 0.01103256456553936, 0.005628909915685654, 0.0064429366029798985, 0.009597988799214363, 0.007081831805408001, 0.05021638050675392, 0.013608241453766823, 0.006261918228119612, 0.005281395744532347, 0.007456284947693348, 0.007868580520153046, 0.03639443218708038, 0.028277430683374405, 0.04496891796588898, 0.02925490029156208, 0.06094635650515556, 0.14171287417411804, 0.013398285955190659, 0.015335241332650185, 0.006753168068826199, 0.0060157692059874535, 0.00811885204166174, 0.007182507310062647, 0.04013512283563614, 0.04199780896306038, 0.07451552152633667, 0.037810251116752625, 0.08171457052230835]], [[0.0069725667126476765, 0.0020179792772978544, 0.0069725667126476765, 0.0015582740306854248, 0.006888530682772398, 0.0015582740306854248, 0.0010855478467419744, 0.0015150326071307063, 0.0033442440908402205, 0.02188175916671753, 0.011395280249416828, 0.06744389235973358, 0.0010855478467419744, 0.0015150326071307063, 0.0033442440908402205, 0.02188175916671753, 0.011395280249416828, 0.022907424718141556, 0.07574702054262161, 0.01711866818368435, 0.03800234943628311, 0.14486369490623474, 0.2805269956588745, 0.0015582740306854248, 0.0010855478467419744, 0.0015150326071307063, 0.0033442440908402205, 0.02188175916671753, 0.011395280249416828, 0.022907424718141556, 0.07574702054262161, 0.01711866818368435, 0.03800234943628311, 0.054422467947006226], [0.12209036946296692, 0.011466218158602715, 0.05161801725625992, 0.014295291155576706, 0.008683385327458382, 0.007995210587978363, 0.005548663437366486, 0.005656949710100889, 0.008337494917213917, 0.008086233399808407, 0.05072684586048126, 0.012488383799791336, 0.005467171315103769, 0.004686002619564533, 0.006690945941954851, 0.007600609213113785, 0.028147242963314056, 0.025324517861008644, 0.040676187723875046, 0.025423558428883553, 0.056284062564373016, 0.125009223818779, 0.011795209720730782, 0.010150856338441372, 0.006139528006315231, 0.0055761029943823814, 0.007535194978117943, 0.00709048006683588, 0.0287717804312706, 0.03691515326499939, 0.06724358350038528, 0.03139567747712135, 0.07699964940547943, 0.07808417081832886]], [[0.009417066350579262, 0.002053804462775588, 0.009417066350579262, 0.002115149050951004, 0.008692402392625809, 0.002115149050951004, 0.0015730251325294375, 0.002640015445649624, 0.005043203476816416, 0.02037286013364792, 0.01773155853152275, 0.039819344878196716, 0.0015730251325294375, 0.002640015445649624, 0.005043203476816416, 0.02037286013364792, 0.01773155853152275, 0.024079741910099983, 0.06625059992074966, 0.0183750931173563, 0.07807902991771698, 0.11202771961688995, 0.1505880057811737, 0.002115149050951004, 0.0015730251325294375, 0.002640015445649624, 0.005043203476816416, 0.02037286013364792, 0.01773155853152275, 0.024079741910099983, 0.06625059992074966, 0.0183750931173563, 0.07807902991771698, 0.054903794080019, 0.09108445048332214], [0.09665312618017197, 0.012536898255348206, 0.04985035955905914, 0.016409853473305702, 0.010273510590195656, 0.009010450914502144, 0.006287558935582638, 0.006220400333404541, 0.009013263508677483, 0.00848123338073492, 0.04932652786374092, 0.01292615570127964, 0.006471362430602312, 0.00514527503401041, 0.007230589631944895, 0.007814410142600536, 0.028776053339242935, 0.02501661330461502, 0.03685368597507477, 0.027366967871785164, 0.04924044758081436, 0.08925147354602814, 0.013433512300252914, 0.011432090774178505, 0.007055783644318581, 0.006137317046523094, 0.00794336199760437, 0.007660048082470894, 0.029316332191228867, 0.03442617878317833, 0.055116888135671616, 0.02963879331946373, 0.06160954385995865, 0.07052582502365112, 0.09554809331893921]], [[0.010750007815659046, 0.0016822305042296648, 0.010750007815659046, 0.0025525211822241545, 0.028174925595521927, 0.0025525211822241545, 0.001353487721644342, 0.0012104950146749616, 0.0031873227562755346, 0.04182271659374237, 0.04133950173854828, 0.043162498623132706, 0.001353487721644342, 0.0012104950146749616, 0.0031873227562755346, 0.04182271659374237, 0.04133950173854828, 0.017109207808971405, 0.046552956104278564, 0.0114269545301795, 0.04472965747117996, 0.061818160116672516, 0.1402381956577301, 0.0025525211822241545, 0.001353487721644342, 0.0012104950146749616, 0.0031873227562755346, 0.04182271659374237, 0.04133950173854828, 0.017109207808971405, 0.046552956104278564, 0.0114269545301795, 0.04472965747117996, 0.0540432408452034, 0.07309994846582413, 0.06224505975842476], [0.12263471633195877, 0.010404782369732857, 0.047359079122543335, 0.014583326876163483, 0.009166089817881584, 0.0060935551300644875, 0.0053582098335027695, 0.006650941446423531, 0.00831857230514288, 0.003928598016500473, 0.0337393656373024, 0.011237666010856628, 0.00430879695340991, 0.004273164551705122, 0.005805729888379574, 0.0036674728617072105, 0.01808178424835205, 0.02218516170978546, 0.03764235973358154, 0.019558344036340714, 0.034136220812797546, 0.06515474617481232, 0.011226021684706211, 0.008605950511991978, 0.004983491729944944, 0.005435398779809475, 0.006735755130648613, 0.0042274147272109985, 0.020138952881097794, 0.032168444246053696, 0.04638515040278435, 0.025870658457279205, 0.05196040868759155, 0.06002103537321091, 0.07449518889188766, 0.1534574329853058]]];
        var y_action = [[[0.0003375764354132116, 0.028500141575932503, 0.9702506065368652, 0.000911712006200105]], [[9.129809086516616e-07, 0.9999146461486816, 1.1555813216546085e-05, 7.279509009094909e-05]], [[8.631773518175123e-09, 0.9999998807907104, 4.550802845670887e-09, 1.2337618215951807e-07]], [[3.631206254794961e-06, 1.5485412063753756e-07, 1.1975147436171785e-11, 0.9999961853027344]], [[0.03932209685444832, 0.9581100344657898, 0.00012014445383101702, 0.0024476032704114914]], [[8.34912498248741e-07, 0.9925192594528198, 0.00747012160718441, 9.867013432085514e-06]], [[4.023114524898119e-05, 2.962700591524481e-07, 7.150844805181578e-09, 0.9999594688415527]], [[1.972512251313674e-07, 1.4062071507225937e-08, 3.545637738966434e-08, 0.9999997615814209]], [[5.888264240638819e-06, 5.007845693683066e-09, 2.7976150249742204e-06, 0.9999912977218628]], [[2.3577764295623638e-05, 3.8279882735858806e-12, 3.337164225514222e-11, 0.999976396560669]], [[0.0001136875944212079, 7.887342444749465e-14, 6.241321237610009e-09, 0.9998862743377686]], [[0.924227237701416, 4.703710146714002e-05, 0.0754246637225151, 0.0003010114887729287]], [[5.279270226310473e-06, 8.542476592765524e-08, 2.204160591645632e-05, 0.9999725818634033]], [[8.03222022227601e-09, 2.7594567256206126e-11, 2.1838992836364923e-09, 1.0]], [[1.3016071989113698e-06, 7.36190709088591e-12, 1.802513871496103e-08, 0.9999986886978149]], [[2.5607542397665384e-07, 2.9854950976682115e-12, 9.216786907018104e-07, 0.9999988079071045]], [[1.6304505523478952e-09, 1.3461324499530747e-07, 0.9999998807907104, 2.1982657361085955e-10]], [[0.0006867238553240895, 0.0036066684406250715, 0.006633096840232611, 0.9890734553337097]], [[1.6711217132314715e-10, 1.0, 7.753852560021812e-10, 3.309099128046e-08]], [[3.063468466280028e-05, 7.115386613243402e-10, 2.5576105144864414e-07, 0.9999691247940063]], [[2.520995963095629e-07, 6.467569146906271e-09, 0.9996365308761597, 0.00036316318437457085]], [[1.6477215467602946e-05, 8.575398879884233e-08, 9.123437422209335e-11, 0.9999834299087524]], [[0.9789506793022156, 0.00017951030167751014, 0.020087312906980515, 0.0007824523490853608]], [[1.101904266616327e-12, 1.0, 9.596010652757059e-10, 6.732630009054219e-10]], [[4.503126547206193e-07, 2.4774673423877402e-09, 2.172870994243681e-09, 0.9999995231628418]], [[2.833894452436425e-09, 2.6155079838052764e-11, 3.575420515211647e-10, 1.0]], [[4.4509948793347576e-07, 2.5690138905076765e-09, 1.1700896918043213e-09, 0.9999995231628418]], [[2.4890169925129157e-08, 2.7974189631407853e-09, 4.7450021689599e-09, 1.0]], [[1.5222030924633145e-07, 1.1260207429586444e-05, 0.9999877214431763, 7.761507276882185e-07]], [[1.0182565119976061e-06, 0.00021516522974707186, 2.247335942229256e-06, 0.9997815489768982]], [[1.694532847373864e-10, 0.9999425411224365, 9.072664397535846e-09, 5.7462289987597615e-05]], [[1.556863026053179e-05, 4.947186198478448e-07, 2.49696853416026e-07, 0.9999836683273315]], [[2.1644841581291985e-06, 5.462460649141576e-06, 0.0006933443946763873, 0.9992990493774414]], [[2.770939866447719e-10, 1.6545290293379367e-07, 0.9999998807907104, 1.1719394343856493e-09]], [[1.8787655875485143e-08, 5.610273530465282e-12, 2.2261137377910245e-10, 1.0]], [[1.1498685381639007e-07, 1.2691744356863044e-12, 1.9914524196362748e-10, 0.9999998807907104]], [[8.318579057231545e-05, 0.2602686882019043, 0.7396335005760193, 1.4607910088670906e-05]]]; // action probs
        var action =  [[2], [1], [1], [3], [1], [1], [3], [3], [3], [3], [3], [0], [3], [3], [3], [3], [2], [3], [1], [3], [2], [3], [0], [1], [3], [3], [3], [3], [2], [3], [1], [3], [3], [2], [3], [3], [2]];
        var action_names = [['no-op', 'rotate left', 'rotate right', 'move forward']];
        var x_values = [...Array(y_values.length).keys()];

        var y_entropy_plot = [];
        var y_values_plot = [];

        // Set marker for plots
        var entropy_marker = false;
        var value_marker = false;

        // Set the to be shown statistic
        var statistic_type = 'general'
        // Only used for the transformer plot to show the correct statistic with tab switching
        var statistic_plot_id = 0;
        // Hide statistic type button if there is no attention weights
        if(y_attention_weights.length == 0) stats_button.style.display = 'none';

        // Set the to be shown action_space(s) for the entropy plot
        var entr_selected_action_space = null;

        var is_multi_discrete = action[0].length != 1;
        var is_discrete = action[0].length == 1;

        // Reformat the data for the plots
        // Each function y - value should be stored in a separate array
        for(var j = 0; j < y_values[0].length; j++)
            for(var i = 0; i < y_values.length; i++)
                y_values_plot.push(y_values[i][j]);

        if(is_discrete) { // If action_space is discrete
          for(var j = 0; j < y_entropy[0].length; j++)
              for(var i = 0; i < y_values.length; i++)
                  y_entropy_plot.push(y_entropy[i][j]);
        }
        else { // If action_space is multi discrete
          for(var j = 0; j < y_entropy[0].length; j++) {
            var y_entropy_vals = [];
            for(var i = 0; i < y_entropy.length; i++) {
                y_entropy_vals.push(y_entropy[i][j]);
            }
            y_entropy_plot.push(y_entropy_vals);
          }
        }

        // Set action_names for distr. plot if it does not exist
        if(action_names == null){
          action_names = [];
          for(var i = 0; i < y_action[0].length; i++){
            for(var j = 0; j < y_action[0][0].length; j++)
              if(is_discrete){ // if action space is discrete
                action_names.push("action_" + String(j));
            }
            else { // if action space is multi_discrete
              var action_branch_names = []; // Names of the branches of the action space
              for(var j = 0; j < y_action[0][i].length; j++){
                action_branch_names.push("action_" + String(j));
              }
              action_names.push(action_branch_names);
            }     
          }
        }
        else{
          if(action[0].length == 1 && Array.isArray(action_names[0])){ // If action space is discrete and action_names is multi_discrete
            action_names = action_names[0]; // Set action_names to the first branch of the action space
          }
        }

        // Modify dropdown menu
        if(is_discrete){ // if action space is discrete
          document.getElementById("all").outerHTML=""; // remove dropdown option 'all'
        }
        else { // If action space is multi_discrete
          // Create dropdown menu for the entropy function
          var dropdown_content = document.getElementById("dropdown_content"); 
          for(var i = 0; i < action[0].length; i++){
            var entropy_dropdown_option = document.createElement("a");
            entropy_dropdown_option.innerHTML = "action_space_" + String(i);
            entropy_dropdown_option.setAttribute("href", "#");
            entropy_dropdown_option.setAttribute("onclick", "set_action_space(" + String(i) + ")");
            dropdown_content.appendChild(entropy_dropdown_option);
          }
        }

        window.addEventListener('load', () => {
          // Set video length to length - 0.9999 because the last frame is two seconds long
          video_length = video_player.duration - 0.9999;
          time_selector.setAttribute('max', video_length); // Set max value of time selector to video length

          video_player.addEventListener('timeupdate', timeListener); // Update time selector and plots when video is playing
          video_player.addEventListener('dblclick', function(e) {open_fullscreen(video_player);}); // Open video in fullscreen when video is double clicked
          video_player.playbackRate = 6; // Set video playback rate to frame rate
          reset(); // Reset video to start
        }, false);
      
      // Update video time if time selector is changed
      time_selector.addEventListener('input', () => {
          video_player.currentTime = time_selector.value
          pause();
          update();
      })

      // Add event manager for tab
      window.addEventListener('keydown', function(event) {
          if (event.key === 'Tab') {
              if (statistic_type == "transformer") {
                statistic_plot_id = (statistic_plot_id + 1) % 3;
                // Set action plot if statistic_plot_id is 0
                if(statistic_plot_id == 0){
                  // Update action plot
                  if(is_discrete) { // If action_space is discrete
                    set_bar_action_plot(y_action[step][0], action[step][0], action_names);
                  }
                  else { // If action_space is multi discrete
                      set_stacked_bar_action_plot(y_action[step], action[step], action_names);
                  }
                }
                // Set value plot if statistic_plot_id is 1
                if (statistic_plot_id == 1) {
                  set_scatter_line_plot('action_distr', "Value Function", y_values_plot, step, value_marker);
                }

              // Set entropy plot if statistic_plot_id is 2
              if (statistic_plot_id == 2) {
                  if(is_discrete) { // If action_space is discrete
                      set_scatter_line_plot('action_distr', "Entropy Function", y_entropy_plot, step, entropy_marker);
                  }
                  else { // If action_space is multi discrete
                      set_scatter_lines_plot('action_distr', "Entropy Function", y_entropy_plot, step, entropy_marker);
                  }
              }
          }
      }
    });

    // Show ground truth if checkbox is checked
    function show_ground_truth() {
        // Get the checkbox element by its ID
        var checkbox = document.getElementById("show_ground_truth");
        
        // Check if the checkbox is checked
        if (checkbox.checked) { // Show the ground truth
          if (video_id == render_id) video_id = render_gt_id;
          if (video_id == render_decoder_id) video_id = render_decoder_gt_id;
          if (video_id == render_agent_id) video_id = render_agent_gt_id;
          set_video(video_path[video_id]);
        } else {
          if (video_id == render_gt_id) video_id = render_id;
          if (video_id == render_decoder_gt_id) video_id = render_decoder_id;
          if (video_id == render_agent_gt_id) video_id = render_agent_id;
          set_video(video_path[video_id]);
        }
      }

    // Show decoder video if checkbox is checked
    function show_decoder_video() {
      var checkbox = document.getElementById("show_decoder_video");
      document.getElementById("show_agent_video").checked = false;

      if (checkbox.checked) { 
          if (video_id == render_id) video_id = render_decoder_id;
          if (video_id == render_gt_id) video_id = render_decoder_gt_id;
          if (video_id == render_agent_id) video_id = render_decoder_id;
          if (video_id == render_agent_gt_id) video_id = render_decoder_gt_id;
          set_video(video_path[video_id]);
        } else { // Hide decoder video
          if (video_id == render_decoder_id) video_id = render_id;
          if (video_id == render_decoder_gt_id) video_id = render_gt_id;
          set_video(video_path[video_id]);
        }
    }

    // Show agent video if checkbox is checked
    function show_agent_video() {
      var checkbox = document.getElementById("show_agent_video");
      document.getElementById("show_decoder_video").checked  = false;

      if (checkbox.checked) { 
          if (video_id == render_id) video_id = render_agent_id;
          if (video_id == render_gt_id) video_id = render_agent_gt_id;
          if (video_id == render_decoder_id) video_id = render_agent_id;
          if (video_id == render_decoder_gt_id) video_id = render_agent_gt_id;
          set_video(video_path[video_id]);
        } else { // Hide agent video
          if (video_id == render_agent_id) video_id = render_id;
          if (video_id == render_agent_gt_id) video_id = render_gt_id;
          set_video(video_path[video_id]);
        }
    }

    // Set the video to the given path
    function set_video(path) {
        // Get video data to make the switch seamless
        var current_time = video_player.currentTime;
        var play_back_rate = video_player.playbackRate;
        var is_paused = video_player.paused;
        video_player.querySelector("source").src = path;
        // Reload video
        video_player.load();
        video_player.currentTime = current_time;
        video_player.playbackRate = play_back_rate;
        if(is_paused) pause();
        else play();
    }


      /**
      * Update time selector and plots when video is playing
      */
      function timeListener() {
        if(!video_player.paused) {
          update();
        } 
      }

      /**
      * Toggles button and video between playing and paused
      */
      function play_pause() {
        if(video_player.paused)
          play();
        else 
          pause();
      }

      /**
       * Returns to the previous frame step
       */
       function return_to_step() {
        video_player.currentTime = past_steps.pop();
        pause();
        update();
        gotostep_text.value = step;
        return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
       * Updates the plots and time selector
       */
       function go_to_step(event) {
        if (event.keyCode === 13) {
          past_steps.push(step);
          video_player.currentTime = Number(gotostep_text.value);
          pause();
          update();
          gotostep_text.value = step;
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
        }
      }

      function set_video_speed(event) {
        if (event.keyCode === 13) {
          video_player.playbackRate = Number(video_speed.value);
        }
      }

      /**
       * Updates the plots and time selector
       */
       function top_scores() {
        if (event.keyCode === 13) update()
      }

      /**
      * Pauses video
      */
      function pause() {
          play_pause_button.innerHTML = "Play";
          video_player.pause();
      }

      /**
      * Plays the video
      */
      function play() {
          play_pause_button.innerHTML = "Pause";
          video_player.play();
      }

      /**
      * Resets the video and plots to the start
      */
      function reset() {
          video_player.currentTime = 0;
          past_steps.push(step);
          pause();
          update();
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
      * Goes to the previous frame
      */
      function back() {
          video_player.currentTime = video_player.currentTime - tS_step_size
          pause();
          update();
          past_steps.push(step + 1);
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
      * Goes to the next frame
      */
      function next() {
          video_player.currentTime = video_player.currentTime + tS_step_size;
          pause();
          update();
          past_steps.push(step - 1);
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
       * Switches between general and transformer statistics
       */
       function statistic() {
        if (stats_button.innerHTML == "General") {
          statistic_type = "general";
          stats_button.innerHTML = "Transformer";
        }
        else if (stats_button.innerHTML == "Attention Scores") {
          statistic_type = "transformer";
          stats_button.innerHTML = "General";
        }
        update();
      }
      /**
      * Opens the video in fullscreen
      */
      function open_fullscreen(vid_elem) {
          if (vid_elem.requestFullscreen) {
              vid_elem.requestFullscreen();
          } else if (vid_elem.webkitRequestFullscreen) { /* Safari */
              vid_elem.webkitRequestFullscreen();
          } else if (vid_elem.msRequestFullscreen) { /* IE11 */
              vid_elem.msRequestFullscreen();
          }
          vid_elem.pause();
      }

      // Selects the action space for the entropy plot
      function set_action_space(spaces){
        if (spaces == 'all')
          entr_selected_action_space = null;
        else
          entr_selected_action_space = Number(spaces);
        update();
      }

      function marker(marker_id){
        if(marker_id == "entropy")
          entropy_marker = !entropy_marker;
        else if(marker_id == "value")
          value_marker = !value_marker;
        update();
      }

      /**
      * Updates the plots and time selector
      */
      function update()  {
        if(video_player.currentTime == Math.round(video_player.currentTime)) // If time t of video is a natural number then step is t - 1
              video_player.currentTime += 0.0001 // Add a small number to make sure that the step and the current time are the same
        if(video_player.currentTime > video_length) {
           video_player.currentTime = video_length;
           pause();
        } // Video can't go past the end
        time_selector.value = video_player.currentTime; // Update time selector
        step = Math.floor(video_player.currentTime); // Get step of video for plots

        // Update plots
        if (statistic_type == "general")
          render_general_statistics();
        else if (statistic_type == "transformer")
          render_transformer_statistics();

        if(statistic_type == "general") {
          // Reset plot id
          statistic_plot_id = 0;
          // Update action plot
          if(is_discrete) { // If action_space is discrete
            set_bar_action_plot(y_action[step][0], action[step][0], action_names);
          }
          else { // If action_space is multi discrete
              set_stacked_bar_action_plot(y_action[step], action[step], action_names);
          }
        }
      }

      /**
      * Renders the general statistics
      */
      function render_general_statistics() {
        // Disables the transformer statistics and enables the general statistics
          document.getElementById('transformer').style.display = 'none';
          document.getElementById('top_n_scores').style.display = 'none';
          document.querySelector('label[for="top_n_scores"]').style.display = 'none';
          document.getElementById('value_func').style.display = 'block';
          document.getElementById('entropy_func').style.display = 'block';
          document.getElementById('options').style.display = 'block';
        // Updates the plots
          set_scatter_line_plot('value_func', "Value Function", y_values_plot, step, value_marker);
          if(is_discrete) { // If action_space is discrete
              set_scatter_line_plot('entropy_func', "Entropy Function", y_entropy_plot, step, entropy_marker);
          }
          else { // If action_space is multi discrete
              set_scatter_lines_plot('entropy_func', "Entropy Function", y_entropy_plot, step, entropy_marker);
          }
        }
      
      /*
      * Renders the transformer statistics
      */
      function render_transformer_statistics() {
        // Disables the general statistics and enables the transformer statistics
        document.getElementById('transformer').style.display = 'block';
        document.getElementById('top_n_scores').style.display = 'block';
        document.querySelector('label[for="top_n_scores"]').style.display = 'block';
        document.getElementById('value_func').style.display = 'none';
        document.getElementById('entropy_func').style.display = 'none';
        document.getElementById('options').style.display = 'none';
        // Updates the plots
        var top_n = Number(top_n_scores.value);
        if (top_n == -1) top_n = step;
        visualizeAttentionScores(y_attention_weights[step], top_n);
        }


      /**
       * Renders attention scores
      */
      async function visualizeAttentionScores(attentionScores, n_values) {
        const numHeads = attentionScores.length;
        
        let data = [];
        let layout = {
          grid: {
              rows: numHeads, 
              columns: 1, 
              pattern: 'independent',
              subplots: [...Array(numHeads).keys()].map(i => `xy${i + 1}`),
              ygap: 0.4 // adjust this value according to your preference
          },
          plot_bgcolor: '#000',
          paper_bgcolor: '#000',
          font: {
              family: 'Montserrat',
              size: 12,
              color: '#fff'
          },
          margin: {
              t: 0,  // reduce top margin
          },
      }

        // Flatten the array to find the max value across all arrays
        let flatScores = attentionScores.flat();
        let maxScore = Math.max(...flatScores);

        // Iterate through each attention head
        for (let headIdx = 0; headIdx < numHeads; headIdx++) {
            // Get attention scores for the current head
            let headScores = attentionScores[headIdx];
            
            // This array will keep up to the 10 highest scores
            let topScores = [];

            for (let i = 0; i < headScores.length; i++) {
                // Insert current score into the top scores array
                topScores.push({score: headScores[i], index: i});
                
                // Sort the top scores array
                topScores.sort((a, b) => b.score - a.score);

                // If there are more than 10 scores, remove the smallest
                if (topScores.length > n_values) {
                    topScores.pop();
                }
            }

            // Sort the topScores array by index
            topScores.sort((a, b) => a.index - b.index);

            // Now topScores contains the top 10 scores sorted by their indices.
            // You can extract the scores and their indices into separate arrays:
            let filteredHeadScores = topScores.map(x => x.score);
            let filteredTicks = topScores.map(x => x.index);


            const sequenceLength = filteredHeadScores.length;

            layout.height = 400;
            layout.width = window.innerWidth;

            const headScoresPlot = {
                z: [filteredHeadScores],
                type: 'heatmap',
                showscale: true,  
                colorscale: 'Hot',
                zmin: 0,
                zmax: maxScore,
                xaxis: `x${headIdx + 1}`,
                yaxis: `y${headIdx + 1}`,
            };

            data.push(headScoresPlot);

            layout[`xaxis${headIdx + 1}`] = {
                tickmode: 'array',
                tickvals: Array.from({length: sequenceLength}, (_, i) => i),
                ticktext: filteredTicks
            };

            layout[`yaxis${headIdx + 1}`] = {
                title: `Block ${headIdx + 1}`,
                ticks: 'outside',
                tick0: 0,
                dtick: 1,
                ticklen: 8,
                tickwidth: 4,
                tickcolor: '#000'
            };
        }

        const config = {responsive: true};

        Plotly.newPlot('transformer', data, layout, config).then(function() {
          var myPlot = document.getElementById('transformer');
          myPlot.on('plotly_click', function(data){
            // Jump to the step that was clicked
              past_steps.push(step);
              video_player.currentTime = Number(data.points[0].xaxis.ticktext[data.points[0].x]);
              pause();
              update();
              return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
          });
      });
    }

      /** 
      * Sets a stacked bar plot for the multi discrete action distribution
      * @param {array} y_values - The action distribution
      * @param {array} action - The action
      * @param {array} action_names - The names of the actions
      */
      function set_stacked_bar_action_plot(y_values, action, action_names) {
        var bar_plot_data_action = [];
        // Set data for each action
        for(var j = 0; j < action_names[0].length; j++) {
            var color = ""
            for(var i = 0; i < action_names.length; i++) {
                if(action[i] == j) // If action sampled in the current frame
                    color = '#FF0000'; // Color it red
                else
                    color = '#FAEBD7'; // Color it white
                var trace = {
                    x: [["action_space_", String(i)].join("")],
                    y: [y_values[i][j]],
                    text: [y_values[i][j], action_names[i][j]].map(String).join("<br>"), // Add action name and prob to the bar
                    marker: {
                        color: color,
                        line: {
                            color: '#000000',
                            width: 1
                          }
                    },
                    type: 'bar'
                };
                bar_plot_data_action.push(trace);
            }
        }

        // Set layout for the plot
        var bar_plot_layout_action = {
            autosize: true,
            width: 600,
            height: 360,
            margin: {
                l: 28,
                r: 0,
                b: 30,
                t: 22,
                pad: 4
              },
            plot_bgcolor: '#000',
            paper_bgcolor: '#000',
            font: {
                family: 'Montserrat',
                size: 12,
                color: '#fff'
            },
            title: {
                text: 'Action Distribution',
                font: {
                    family: 'Montserrat',
                    size: 15,
                    color: '#fff'
                }
            },
            barmode: 'stack',
            showlegend: false
      };

      // Plot the data
      Plotly.newPlot('action_distr', bar_plot_data_action, bar_plot_layout_action);
      }

      /**
      * Sets a bar plot for the discrete action distribution
      */
      function set_bar_action_plot(y_values, action, action_names) {

          var color_value = new Array(y_values.length).fill('#FAEBD7'); // Set color for all actions to white
          color_value[action] = '#FF0000'; // Except the selected action should be red
          // Set data for the plot
          var bar_plot_data_action = [
              {
                  x: action_names,
                  y: y_values,
                  type: 'bar',
                  marker: {
                      color: color_value
                  },
                  textposition: 'auto',
                  text: y_values.map(String), // Add prob to the bar plot
                  textfont: {
                      family: 'Montserrat',
                      size: 12,
                  },
                  textangle: 0,
                  textposition: 'bottom center',
              }
          ];

          // Set layout for the plot
          var bar_plot_layout_action = {
            autosize: true,
            width: 600,
            height: 360,
            margin: {
                l: 28,
                r: 0,
                b: 30,
                t: 22,
                pad: 4
              },
            yaxis: {
              automargin: true,
            },
            plot_bgcolor: '#000',
            paper_bgcolor: '#000',
            font: {
                family: 'Montserrat',
                size: 12,
                color: '#fff'
            },
            title: {
                text: 'Action Distribution',
                font: {
                    family: 'Montserrat',
                    size: 15,
                    color: '#fff'
                }
            }
      };
          
          // Plot the action distribution
          Plotly.newPlot('action_distr', bar_plot_data_action, bar_plot_layout_action);
      }


      /**
      * Sets a scatter plot for the emtropy function if multi discrete actions are used
      * @param {string} id - The id of the plot
      * @param {string} title - The title of the plot
      * @param {array} y_values - The entropy function y values
      * @param {int} step - The step of the video
      * @param {boolean} marker - If the marker should be shown
      */
      function set_scatter_lines_plot(id, title, y_values, step, marker) {
        line_scatter_plot_data_value = [];

        // Set colors and data for the plot
        var colors = ['#FAEBD780', '#7CFC0080', '#FFBF0080', '#FF7F5080', '#DE316380', '#9FE2BF80', '#40E0D080', '#6495ED80', '#CCCCFF80']
        for(var i = 0; i < y_values.length; i++) {
          var x_values_marker = x_values.slice(0, step + 1);
          var y_values_marker = y_values[i].slice(0, step + 1);
            var trace = [
            {
                x: x_values_marker,
                y: y_values_marker,
                mode: 'line',
                line: {
                    color: colors[i]
                },
                name: 'action_space_' + String(i),
                showlegend: true,
            },
            {
                x: x_values,
                y: y_values[i],
                mode: 'markers',
                name: 'action_space_' + String(i) + "_marker",
                marker: {
                    color: colors[i]
                },
                showlegend: true,
            }
        ];
            // Add data to the plot
            line_scatter_plot_data_value.push(trace[0]);
            if(marker)
              line_scatter_plot_data_value.push(trace[1]); 
        }

        // Select the selected action_space for the entropy plot
        if(entr_selected_action_space != null && marker)
          line_scatter_plot_data_value = [line_scatter_plot_data_value[entr_selected_action_space * 2], line_scatter_plot_data_value[entr_selected_action_space * 2 + 1]];
        else if(entr_selected_action_space != null && !marker)
          line_scatter_plot_data_value = [line_scatter_plot_data_value[entr_selected_action_space]];

        // Set layout for the plot
        var line__scatter_plot_layout_value = {
            autosize: true,
            width: 600,
            height: 360,
            margin: {
                l: 50,
                r: 0,
                b: 30,
                t: 25,
                pad: 4
                },
            yaxis: {
                automargin: true
            },
            plot_bgcolor: '#000',
            paper_bgcolor: '#000',
            font: {
                family: 'Montserrat',
                size: 12,
                color: '#fff'
            },
            title: {
                text: title,
                font: {
                    family: 'Montserrat',
                    size: 15,
                    color: '#fff'
                }
            },
            showlegend: true,
        };

        // Plot the data
        Plotly.newPlot(id, line_scatter_plot_data_value, line__scatter_plot_layout_value);
        // Add event handler for clicking on a marker
        document.getElementById(id).on('plotly_click', function(data){
            past_steps.push(step);
            video_player.currentTime = Number(data.points[0].x);
            pause();
            update();
            return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
          });
      }


      /**
      * Sets a scatter plot for the value function
      * @param {string} id - The id of the plot
      * @param {string} title - The title of the plot
      * @param {array} y_values - The value function y values
      * @param {int} step - The step of the video
      * @param {boolean} marker - If the marker should be shown
      */
      function set_scatter_line_plot(id, title, y_values, step, marker) {
          // Set data for layout for the plot
          var line__scatter_plot_layout_value = {
              autosize: true,
              width: 600,
              height: 360,
              margin: {
                  l: 50,
                  r: 0,
                  b: 30,
                  t: 25,
                  pad: 4
                  },
              yaxis: {
                  automargin: true
              },
              plot_bgcolor: '#000',
              paper_bgcolor: '#000',
              font: {
                  family: 'Montserrat',
                  size: 12,
                  color: '#fff'
              },
              title: {
                  text: title,
                  font: {
                      family: 'Montserrat',
                      size: 15,
                      color: '#fff'
                  }
              },
              showlegend: false,
          };

          // Set data for the plot
          var x_values_marker = x_values.slice(0, step + 1);
          var y_values_marker = y_values.slice(0, step + 1);

          var line_scatter_plot_data_value = [
              {
                  x: x_values_marker,
                  y: y_values_marker,
                  mode: 'line',
                  line: {
                      color: '#FAEBD7'
                  },
                  name: 'function',
              },
              {
                  x: x_values,
                  y: y_values,
                  mode: 'markers',
                  marker: {
                      color: '#7CFC0080'
                  },
                  name: 'marker',
              }
          ];

          if(!marker)
            line_scatter_plot_data_value = [line_scatter_plot_data_value[0]];

          // Plot the value function
          Plotly.newPlot(id, line_scatter_plot_data_value, line__scatter_plot_layout_value);

          // Add event handler for clicking on a marker
          document.getElementById(id).on('plotly_click', function(data){
            past_steps.push(step);
            video_player.currentTime = Number(data.points[0].x);
            pause();
            update();
            return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
          });
      }
    
    /**
    * Opens the specific tab based on the probided id
    * @param {string} id - The id of the tab
    */
    function openTab(evt, id) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        mediatabcontent = document.getElementsByClassName("mediatabcontent");
        // Hide all elements with class="tabcontent" and "mediacontent" by default
        for (i = 0; i < mediatabcontent.length; i++) {
            mediatabcontent[i].style.display = "none";
        }
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        // Show the specific tab content
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(id).style.display = "block";
        evt.currentTarget.className += " active";
      }
    </script>
  </body>
</html>