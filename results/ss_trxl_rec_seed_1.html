<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;500&display=swap" rel="stylesheet"/>
    <script src="template/cdn.plot.ly_plotly-2.6.3.min.js"></script>
    <style>
     /* Style the body */
      html, body {
        height: 100%;
        margin: 0;
        background-color: #000;
        color: white;
        font-family: "Montserrat", sans-serif;
      }

      /* Set the width and hight of the video*/
      video {
        width: 600px;
        height: 400px;
      }

      /* Style the timeline text*/
      #selector_header {
        font-weight: 200;
      }

      /* Buttons should be displayed in a row */
      buttonrow {
        display: inline;
      }

      /* Style the figures */
      #figures {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        flex-flow: row wrap;
      }

      /* Style the tab */
      .tab {
        overflow: hidden;
        background-color: #54595f;
      }

      /* Style the buttons inside the tab */
      .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
        color: white;
      }

      /* Change background color of buttons on hover */
      .tab button:hover {
        background-color: #909090;
      }

      /* Create an active/current tablink class */
      .tab button.active {
        background-color: #838383;
      }

      /* Style the tab content */
      .tabcontent {
        display: none;
        padding: 6px 12px;
        border-top: none;
        background-color: #000;
      }

      .mediatabcontent {
        display: none;
        padding: 0 px 0 px;
        border-top: none;
        background-color: #000;
        width: 100%;
        height: 100%;
      }

      /* Style the close button */
      .topright {
        float: right;
        cursor: pointer;
        font-size: 28px;
      }

      .topright:hover {
        color: red;
      }

      /* Style of the dropdown button */
      .dropbtn {
        background-color: #17202A;
        color: white;
        padding: 16px;
        font-size: 16px;
        border: none;
      }
      
      .dropdown {
        position: relative;
        display: inline-block;
      }
      
      /* Style of the dropdown content */
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        background-color: #A6ACAF;
        z-index: 1;
      }
      
      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      .gotostepcontainer {
          margin-bottom: 10px;
      }
      
      #score-container label, #score-container input {
        display: inline-block;
      }

      /* Style of the dropdown at hover */
      .dropdown-content a:hover {background-color: #ddd;}
      
      .dropdown:hover .dropdown-content {display: block;}
      
      .dropdown:hover .dropbtn {background-color: #161515;}
    </style>
  </head>
  <body>
    <!--- Define tabs -->
    <div class="tab">
      <button class="tablinks" onclick="openTab(event, 'Environment')">Environment</button>
      <button class="tablinks" onclick="openTab(event, 'Sampler')">Sampler</button>
      <button class="tablinks" onclick="openTab(event, 'Hyperparameters')">Hyperparameters</button>
      <button class="tablinks" onclick="openTab(event, 'Model')">Model</button>
      <button class="tablinks" onclick="openTab(event, 'Media')" id="defaultOpen">Media</button>
    </div>

    <!--- Define tab content -->
    <div id="Environment" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>type</b>: MemoryGym<br><b>name</b>: SearingSpotlights-v0<br><b>frame_skip</b>: 1<br><b>last_action_to_obs</b>: False<br><b>last_reward_to_obs</b>: False<br><b>obs_stacks</b>: 1<br><b>grayscale</b>: False<br><b>resize_vis_obs</b>: [84, 84]<br><b>positional_encoding</b>: False<br><b>reset_params</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>start-seed</b>: 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num-seeds</b>: 1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_steps</b>: 256<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial_spawns</b>: 4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num_spawns</b>: 30<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial_spawn_interval</b>: 30<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spawn_interval_threshold</b>: 10<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spawn_interval_decay</b>: 0.95<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spot_min_radius</b>: 7.5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spot_max_radius</b>: 13.75<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spot_min_speed</b>: 0.0025<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spot_max_speed</b>: 0.0075<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>spot_damage</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>visual_feedback</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>black_background</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>hide_chessboard</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>light_dim_off_duration</b>: 6<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>light_threshold</b>: 255<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num_coins</b>: [1]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>coin_scale</b>: 0.375<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>coins_visible</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>use_exit</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>exit_visible</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>exit_scale</b>: 0.5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>agent_speed</b>: 3.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>agent_health</b>: 5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>agent_scale</b>: 0.25<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>agent_visible</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>sample_agent_position</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>show_last_action</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>show_last_positive_reward</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_inside_spotlight</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_outside_spotlight</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_death</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_exit</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_max_steps</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>reward_coin</b>: 0.25<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>seed</b>: 1<br><b>reward_normalization</b>: 0<br>
    </div>

    <div id="Model" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>load_model</b>: False<br><b>model_path</b>: <br><b>checkpoint_interval</b>: 500<br><b>activation</b>: relu<br><b>vis_encoder</b>: cnn<br><b>vec_encoder</b>: linear<br><b>num_vec_encoder_units</b>: 128<br><b>hidden_layer</b>: default<br><b>num_hidden_layers</b>: 1<br><b>num_hidden_units</b>: 384<br><b>transformer</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num_blocks</b>: 3<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>embed_dim</b>: 384<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>num_heads</b>: 4<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>memory_length</b>: 256<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>positional_encoding</b>: relative<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>layer_norm</b>: pre<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>init_weights</b>: xavier<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>gtrxl</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>gtrxl_bias</b>: 0.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>gtrxl_swap</b>: False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>share_heads</b>: True<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_episode_steps</b>: 256<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>add_positional_encoding_to_query</b>: False<br><b>obs_decoder</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>attach_to</b>: memory<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>detach_gradient</b>: False<br>
    </div>

    <div id="Sampler" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>n_workers</b>: 32<br><b>worker_steps</b>: 512<br>
    </div>

    <div id="Hyperparameters" class="tabcontent">
      <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
      <b>algorithm</b>: PPO<br><b>resume_at</b>: 0<br><b>gamma</b>: 0.995<br><b>lamda</b>: 0.95<br><b>updates</b>: 30000<br><b>epochs</b>: 3<br><b>refresh_buffer_epoch</b>: -1<br><b>n_mini_batches</b>: 8<br><b>advantage_normalization</b>: no<br><b>value_coefficient</b>: 0.5<br><b>max_grad_norm</b>: 0.25<br><b>share_parameters</b>: True<br><b>learning_rate_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.000275<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 1e-05<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 20000<br><b>beta_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.0001<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 1e-06<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 20000<br><b>clip_range_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 0.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 10000<br><b>obs_reconstruction_schedule</b>: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>initial</b>: 0.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>final</b>: 0.1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>power</b>: 1.0<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>max_decay_steps</b>: 1000<br><b>ground_truth_estimator_schedule</b>: {'initial': 0.0}<br>
    </div>

    <div id="Media" class="mediatabcontent">
      <br>
      <center>
        <div id="figures" style="display: flex; flex-direction: column;">
          <div style="display: flex; flex-direction: row;">
            <div style="display: flex; flex-direction: column;">
              <div style="display: flex; flex-direction: row;">
                <label for="video_speed">Frame Rate: </label>
                <input type="text" id="video_speed" size="3" value="6" onkeydown="set_video_speed(event)">
              </div>

              <div style="display: flex; flex-direction: row;">
                <label for="show_ground_truth">Show Ground Truth Estimation</label>
                <input type="checkbox" id="show_ground_truth" onclick="show_ground_truth()">
              </div>

              <div style="display: flex; flex-direction: row;">
                <label for="show_decoder_video">Show Decoder Video</label>
                <input type="checkbox" id="show_decoder_video" onclick="show_decoder_video()">
              </div>

            <div style="display: flex; flex-direction: row;">
              <label for="show_agent_video">Show Agent Video</label>
              <input type="checkbox" id="show_agent_video" onclick="show_agent_video()">
            </div>
          </div>
          
            <div>
              <video id="video_player">
                <source src="" type="video/webm" />
              </video>
            </div>
            <div id="action_distr"></div>
          </div>
        </div>

        <br>
        <!-- Set buttons to control the figures -->
        <div class="gotostepcontainer">
          <label for="gotostep_text">Step:</label>
          <input type="text" id="gotostep_text" size="3" value="0" onkeydown="go_to_step(event)">
          <button id="return_button" type="return_button" onclick="return_to_step()">Return to step 0</button>
        </div>
        <buttonrow>
          <button id="play_pause_button" onclick="play_pause()" style="width:53px">Play</button>
          <button id="reset_button" onclick="reset()">Reset</button>
          <button id="back_button" onclick="back()">Back</button>
          <button id="next_button" onclick="next()">Next</button>
          <button id="stats_button" onclick="statistic()">Transformer</button>
        </buttonrow>
        <br>
        <!-- Set slider to control the figures -->
        <input id="time_selector" type="range" min="0" max="100" step="1" value="0" style="width: 300px;"/>

        <!-- Set transformer plot -->
        <div id="score-container">
          <label for="top_n_scores">Top Scores:</label>
          <input type="text" id="top_n_scores" size="3" value="-1" onkeydown="top_scores()">
        </div>
        <div id="transformer"></div>

        <!-- Set value plot and entropy plot -->
        <div id="figures">
          <div id="value_func"></div>
          <div id="entropy_func"></div>
          <!-- Dropdown button with some options-->
          <div class="dropdown" id="options">
            <button class="dropbtn">Options</button>
            <div class="dropdown-content" id="dropdown_content">
              <a href ="#" onclick="marker('value')">value_marker_toggle</a>
              <a href ="#" onclick="marker('entropy')">entropy_marker_toggle</a>
              <a href="#" id="all" onclick="set_action_space('all')">All</a>
            </div>
          </div>
        </div>
      </center>
    </div>

    <script>
        // Set active tab
        document.getElementById("defaultOpen").click();

        // Set video player
        const video_player = document.getElementById("video_player");
        const video_speed = document.getElementById("video_speed");
        const video_path = ['videos/video_seed_1_71.webm', '', '', '', '', ''];
        var render_id = 0; var render_gt_id = 1; var render_decoder_id = 2; var render_decoder_gt_id = 3; var  render_agent_id = 4; var render_agent_gt_id = 5;
        var video_id = 0;
        // Hide video player if there is no ground truth video
        if (video_path[render_gt_id].length == 0 && video_path[render_decoder_gt_id].length == 0 && video_path[render_agent_gt_id].length == 0){
          document.querySelector('label[for="show_ground_truth"]').style.display = 'none';
          document.getElementById("show_ground_truth").style.display = 'none';
        } 
        if (video_path[render_decoder_id].length == 0){
          document.querySelector('label[for="show_decoder_video"]').style.display = 'none';
          document.getElementById("show_decoder_video").style.display = 'none';
        }
        if (video_path[render_agent_id].length == 0){
          document.querySelector('label[for="show_agent_video"]').style.display = 'none';
          document.getElementById("show_agent_video").style.display = 'none';
        }

        video_player.querySelector("source").src = video_path[0];
        video_player.load();
        var video_length = 0;

        // Play and pause button
        const play_pause_button = document.getElementById("play_pause_button");

        // Set step input
        const gotostep_text = document.getElementById('gotostep_text');
        var past_steps = [0];
        var step = 0;

        // Set number of scores input
        const top_n_scores = document.getElementById('top_n_scores');

        // Const stats button
        const stats_button = document.getElementById("stats_button");

        // Set time selector
        const time_selector = document.getElementById('time_selector');
        var tS_step_size = 1.0;

        // Set values for the plots
        var y_values = [[1.124089241027832], [1.1328952312469482], [1.1419812440872192], [1.1560758352279663], [1.1615983247756958], [1.1653951406478882], [1.1775574684143066], [1.184506893157959], [1.1895699501037598], [1.1951146125793457], [1.2019739151000977], [1.2103363275527954], [1.2157952785491943], [1.2056941986083984], [1.1728286743164062], [1.1319998502731323], [0.9562909603118896], [0.9684023857116699], [0.9740326404571533], [0.9803413152694702], [0.984939455986023], [0.9852765798568726], [0.9882309436798096], [0.9871262311935425], [0.9798630475997925], [0.9737284183502197]];
        var y_entropy = [[0.6400209069252014, 0.007084857206791639], [0.05140438303351402, 0.03712523356080055], [0.11826466023921967, 0.0019006079528480768], [0.27546927332878113, 0.0008013754850253463], [0.37338191270828247, 0.000966497347690165], [0.40023064613342285, 0.0013585035922005773], [0.23658432066440582, 0.003807288594543934], [0.2471635788679123, 0.002609227318316698], [0.19427190721035004, 0.003397532971575856], [0.1750907152891159, 0.003810061141848564], [0.1639208048582077, 0.004443179350346327], [0.19550348818302155, 0.004475530702620745], [0.2544514238834381, 0.0038637137040495872], [0.4513606131076813, 0.0019951702561229467], [0.6831179857254028, 0.0006609400734305382], [0.6802902221679688, 0.0006626411923207343], [0.5334760546684265, 0.03890636935830116], [0.36008304357528687, 0.024269046261906624], [0.24948981404304504, 0.012556787580251694], [0.37034934759140015, 0.02317054197192192], [0.3866165578365326, 0.025473155081272125], [0.47981497645378113, 0.03762654960155487], [0.5239837765693665, 0.04838404431939125], [0.6247721910476685, 0.05937124788761139], [0.731033205986023, 0.07205317914485931], [0.835391640663147, 0.12490608543157578]];
        var y_attention_weights = [[[], [], []], [[1.0], [1.0], [1.0]], [[0.4240560829639435, 0.5759438872337341], [0.2929918169975281, 0.7070081233978271], [0.6873515844345093, 0.3126484453678131]], [[0.23975329101085663, 0.23649966716766357, 0.5237470865249634], [0.1868235468864441, 0.4657859802246094, 0.34739047288894653], [0.552182674407959, 0.2571282386779785, 0.19068904221057892]], [[0.17142176628112793, 0.15541276335716248, 0.2898871898651123, 0.38327834010124207], [0.1377619355916977, 0.3775050938129425, 0.27576178312301636, 0.20897117257118225], [0.4801589250564575, 0.23635977506637573, 0.1696329116821289, 0.11384835839271545]], [[0.13678905367851257, 0.12279105931520462, 0.22616758942604065, 0.28809523582458496, 0.2261570394039154], [0.11390556395053864, 0.340798556804657, 0.24651697278022766, 0.18305660784244537, 0.11572233587503433], [0.43434321880340576, 0.22197172045707703, 0.15466071665287018, 0.1013827919960022, 0.08764152228832245]], [[0.1253093034029007, 0.11204534769058228, 0.20026639103889465, 0.2549899220466614, 0.20485399663448334, 0.10253504663705826], [0.1027509868144989, 0.32216134667396545, 0.23510268330574036, 0.17327940464019775, 0.10805120319128036, 0.05865440517663956], [0.4041627049446106, 0.20935028791427612, 0.14118050038814545, 0.09119750559329987, 0.07834264636039734, 0.07576635479927063]], [[0.11560462415218353, 0.10221733152866364, 0.18430852890014648, 0.24428950250148773, 0.20701339840888977, 0.0973186269402504, 0.049248021095991135], [0.09928873181343079, 0.3195856511592865, 0.2350381314754486, 0.16844533383846283, 0.10067003220319748, 0.051805172115564346, 0.025166962295770645], [0.38710421323776245, 0.199518620967865, 0.12981881201267242, 0.08167121559381485, 0.0693560391664505, 0.066802479326725, 0.06572858989238739]], [[0.11124683916568756, 0.09979530423879623, 0.18001806735992432, 0.236301988363266, 0.198418527841568, 0.08975264430046082, 0.04159209877252579, 0.0428745336830616], [0.09838476777076721, 0.32123038172721863, 0.2315681278705597, 0.1632215976715088, 0.09586174786090851, 0.048426058143377304, 0.02257925644516945, 0.018728019669651985], [0.37235814332962036, 0.1927947849035263, 0.12181331217288971, 0.07452916353940964, 0.06254112720489502, 0.05986759066581726, 0.05885517969727516, 0.05724073201417923]], [[0.10837052762508392, 0.09742538630962372, 0.17642074823379517, 0.2310723066329956, 0.19306407868862152, 0.08457651734352112, 0.036101266741752625, 0.036153245717287064, 0.03681596741080284], [0.09684372693300247, 0.3212926983833313, 0.22844219207763672, 0.15877066552639008, 0.09214143455028534, 0.0459776297211647, 0.020805176347494125, 0.017029723152518272, 0.018696734681725502], [0.358895480632782, 0.1877506971359253, 0.11581932753324509, 0.06919513642787933, 0.057416725903749466, 0.05466223135590553, 0.053707413375377655, 0.05209684371948242, 0.05045619606971741]], [[0.10553055256605148, 0.09429756551980972, 0.1731947958469391, 0.22731001675128937, 0.18920311331748962, 0.08087362349033356, 0.03235473483800888, 0.031768109649419785, 0.032352738082408905, 0.03311477228999138], [0.09523041546344757, 0.31774744391441345, 0.22394689917564392, 0.15419131517410278, 0.0888083279132843, 0.04414993152022362, 0.019731024280190468, 0.015908386558294296, 0.017218412831425667, 0.023067818954586983], [0.34483417868614197, 0.18361613154411316, 0.11139046400785446, 0.06534367054700851, 0.05355873703956604, 0.05059989541769028, 0.04955001175403595, 0.04806172475218773, 0.0465501993894577, 0.04649493098258972]], [[0.10323010385036469, 0.09267739951610565, 0.17152990400791168, 0.22526419162750244, 0.18522581458091736, 0.07752706110477448, 0.029415665194392204, 0.027941765263676643, 0.028125623241066933, 0.02859574742615223, 0.03046669252216816], [0.09373021125793457, 0.31320422887802124, 0.2183249145746231, 0.1489286720752716, 0.08517027646303177, 0.042147696018218994, 0.018496666103601456, 0.014634082093834877, 0.015567833557724953, 0.020676041021943092, 0.029119355604052544], [0.3343353569507599, 0.17967236042022705, 0.10719232261180878, 0.061702270060777664, 0.049988240003585815, 0.04690837115049362, 0.045824483036994934, 0.044359076768159866, 0.04289575666189194, 0.0428168922662735, 0.04430486261844635]], [[0.1011478453874588, 0.0907134860754013, 0.16904686391353607, 0.22227098047733307, 0.18265874683856964, 0.07550778985023499, 0.027123816311359406, 0.02495420165359974, 0.025020089000463486, 0.025399887934327126, 0.027022534981369972, 0.029133761301636696], [0.092840276658535, 0.30786097049713135, 0.21157826483249664, 0.1428694725036621, 0.08126535266637802, 0.040243133902549744, 0.017516911029815674, 0.013612402603030205, 0.0142435347661376, 0.01873687282204628, 0.026263900101184845, 0.03296889364719391], [0.3247784674167633, 0.17665019631385803, 0.1035028025507927, 0.058348558843135834, 0.04671370983123779, 0.043544501066207886, 0.042354464530944824, 0.0408601276576519, 0.03942866250872612, 0.03932756930589676, 0.040697526186704636, 0.04379349946975708]], [[0.1002064198255539, 0.08974630385637283, 0.16748979687690735, 0.22083115577697754, 0.18009093403816223, 0.07270193099975586, 0.024744220077991486, 0.022105183452367783, 0.022028900682926178, 0.022260278463363647, 0.02360953576862812, 0.025462139397859573, 0.028723178431391716], [0.09300708025693893, 0.30157989263534546, 0.206063374876976, 0.13795256614685059, 0.07787863165140152, 0.03840906172990799, 0.016611458733677864, 0.012717556208372116, 0.013128254562616348, 0.01713162288069725, 0.02393438294529915, 0.030121950432658195, 0.03146422281861305], [0.318792462348938, 0.17389355599880219, 0.09996914863586426, 0.05488051474094391, 0.0433114618062973, 0.04011017084121704, 0.038908883929252625, 0.03737900033593178, 0.03596292436122894, 0.035854239016771317, 0.03712836652994156, 0.040023960173130035, 0.043785300105810165]], [[0.10013534128665924, 0.0898471474647522, 0.16880503296852112, 0.22138556838035583, 0.17301909625530243, 0.0692262202501297, 0.023213934153318405, 0.019047023728489876, 0.018555646762251854, 0.019064759835600853, 0.020778419449925423, 0.022935917600989342, 0.025785347446799278, 0.028200572356581688], [0.09927013516426086, 0.29648640751838684, 0.20048171281814575, 0.1321793496608734, 0.07345017790794373, 0.03594551235437393, 0.015355546027421951, 0.011715535074472427, 0.012122690677642822, 0.015754247084259987, 0.02183998003602028, 0.02749350108206272, 0.02893916144967079, 0.02896609716117382], [0.30922362208366394, 0.1753484159708023, 0.09678386896848679, 0.0511016771197319, 0.03981395065784454, 0.036789003759622574, 0.03582059592008591, 0.03446591645479202, 0.03310375660657883, 0.03293442726135254, 0.03406021371483803, 0.036668628454208374, 0.04009184241294861, 0.04379413649439812]], [[0.09789688140153885, 0.0885411947965622, 0.16756148636341095, 0.218407541513443, 0.17006871104240417, 0.06866982579231262, 0.02237503044307232, 0.017562435939908028, 0.016735220327973366, 0.017053764313459396, 0.01860666275024414, 0.020484227687120438, 0.02293020859360695, 0.024823956191539764, 0.0282828900963068], [0.10118043422698975, 0.2965519428253174, 0.19605526328086853, 0.1271994411945343, 0.07003557682037354, 0.03443096950650215, 0.014709324575960636, 0.011115369386970997, 0.011368248611688614, 0.014532729983329773, 0.0197561327368021, 0.024625908583402634, 0.025890976190567017, 0.026130342856049538, 0.026417292654514313], [0.3016136884689331, 0.17427381873130798, 0.09419479966163635, 0.04836122691631317, 0.03703654557466507, 0.033879876136779785, 0.03282128646969795, 0.031615760177373886, 0.03033439815044403, 0.030164703726768494, 0.031155960634350777, 0.033485133200883865, 0.03656179457902908, 0.039935655891895294, 0.044565413147211075]], [[0.1039140447974205, 0.08875013142824173, 0.1313919723033905, 0.12092989683151245, 0.09588883817195892, 0.051424041390419006, 0.028445910662412643, 0.04321039095520973, 0.04477154463529587, 0.04612167552113533, 0.043011508882045746, 0.041475895792245865, 0.04142829030752182, 0.0418543703854084, 0.039179157465696335, 0.038202326744794846], [0.17014530301094055, 0.2967228293418884, 0.17573073506355286, 0.12184063345193863, 0.0723225548863411, 0.03865814581513405, 0.01600378192961216, 0.01155025977641344, 0.010849780403077602, 0.011758319102227688, 0.012429631315171719, 0.01200021430850029, 0.011282529681921005, 0.011823385022580624, 0.012978343293070793, 0.013903568498790264], [0.33619555830955505, 0.18814924359321594, 0.09537412971258163, 0.04910555109381676, 0.03583382070064545, 0.029770884662866592, 0.025323763489723206, 0.024227479472756386, 0.023636959493160248, 0.023624442517757416, 0.02396986074745655, 0.025214148685336113, 0.02685738354921341, 0.029028883203864098, 0.030784698203206062, 0.03290326148271561]], [[0.09367343783378601, 0.07653947174549103, 0.1238822191953659, 0.11964480578899384, 0.09631125628948212, 0.04796093702316284, 0.017234057188034058, 0.014228928834199905, 0.013039267621934414, 0.012792746536433697, 0.013649013824760914, 0.015383502468466759, 0.017502745613455772, 0.01882297918200493, 0.020437924191355705, 0.021967584267258644, 0.27692911028862], [0.15489402413368225, 0.2850187420845032, 0.1811111867427826, 0.1301243007183075, 0.07874041050672531, 0.04211372137069702, 0.016834383830428123, 0.011581079103052616, 0.01060581486672163, 0.011402538977563381, 0.011817841790616512, 0.011152651160955429, 0.010364295914769173, 0.010879963636398315, 0.011937417089939117, 0.012833119370043278, 0.008588469587266445], [0.31930482387542725, 0.18738555908203125, 0.097648985683918, 0.051295071840286255, 0.03711364045739174, 0.02998548001050949, 0.024242527782917023, 0.022927526384592056, 0.022211160510778427, 0.022055909037590027, 0.022226842120289803, 0.023298881947994232, 0.02477184310555458, 0.02676578238606453, 0.02821039967238903, 0.030057944357395172, 0.030497603118419647]], [[0.09566553682088852, 0.07629969716072083, 0.12210509181022644, 0.11757022142410278, 0.09479743242263794, 0.04586199298501015, 0.015378746204078197, 0.012781111523509026, 0.011835223995149136, 0.011582174338400364, 0.01224253885447979, 0.013721448369324207, 0.0157010555267334, 0.01711970567703247, 0.01890728808939457, 0.020538175478577614, 0.27482640743255615, 0.023066135123372078], [0.1489708423614502, 0.2837572395801544, 0.1808667927980423, 0.12980687618255615, 0.07846619188785553, 0.041962504386901855, 0.016511058434844017, 0.011242949403822422, 0.010278048925101757, 0.011058368720114231, 0.011454153805971146, 0.010808922350406647, 0.010056702420115471, 0.01060413382947445, 0.011636842973530293, 0.012529971078038216, 0.00835695955902338, 0.011631360277533531], [0.31440863013267517, 0.18334028124809265, 0.09418754279613495, 0.049161944538354874, 0.03556113690137863, 0.028724053874611855, 0.02320282533764839, 0.02182244509458542, 0.02110780030488968, 0.020938310772180557, 0.02108866721391678, 0.02207716554403305, 0.02341683954000473, 0.02528540790081024, 0.026626598089933395, 0.028407901525497437, 0.028922203928232193, 0.031720224767923355]], [[0.09550882875919342, 0.07624050974845886, 0.1223524957895279, 0.11912573873996735, 0.09407901763916016, 0.043649204075336456, 0.01420040987432003, 0.011242659762501717, 0.010185698047280312, 0.010031631216406822, 0.010802279226481915, 0.012419946491718292, 0.014301166869699955, 0.015478046610951424, 0.016911691054701805, 0.018274061381816864, 0.27335625886917114, 0.020978737622499466, 0.02086162567138672], [0.15417397022247314, 0.2825254499912262, 0.17665167152881622, 0.12624216079711914, 0.07620732486248016, 0.041146211326122284, 0.016394637525081635, 0.01115903165191412, 0.01010232325643301, 0.010712753981351852, 0.010980332270264626, 0.010372714139521122, 0.00971141830086708, 0.010289661586284637, 0.011254063807427883, 0.01203726977109909, 0.008146923966705799, 0.011169623583555222, 0.010722403414547443], [0.3090544044971466, 0.18427038192749023, 0.09217645972967148, 0.04659820720553398, 0.03326953947544098, 0.026740793138742447, 0.021708223968744278, 0.02050733007490635, 0.01992207020521164, 0.019797153770923615, 0.019898030906915665, 0.02075822278857231, 0.02192625030875206, 0.02357565239071846, 0.024751314893364906, 0.026420995593070984, 0.026697415858507156, 0.029549580067396164, 0.03237798437476158]], [[0.09586946666240692, 0.07614755630493164, 0.12166587263345718, 0.1173754334449768, 0.09222817420959473, 0.04237883538007736, 0.01316450908780098, 0.010234507732093334, 0.009341730736196041, 0.00925897341221571, 0.00998888723552227, 0.011461053974926472, 0.01312733069062233, 0.014188512228429317, 0.015478401444852352, 0.016750052571296692, 0.2710282504558563, 0.019102917984128, 0.01894613727927208, 0.022263454273343086], [0.15625843405723572, 0.2787720263004303, 0.17212313413619995, 0.12260247021913528, 0.07405915856361389, 0.04033800959587097, 0.01628280058503151, 0.011166773736476898, 0.01013701781630516, 0.010757029056549072, 0.01105168554931879, 0.010505123995244503, 0.009910733439028263, 0.010557789355516434, 0.011524488218128681, 0.012338673695921898, 0.008461558260023594, 0.011468879878520966, 0.0110471211373806, 0.010637061670422554], [0.30275601148605347, 0.18310432136058807, 0.08973725885152817, 0.044011060148477554, 0.03107525035738945, 0.0250018909573555, 0.020504973828792572, 0.019374439492821693, 0.01883704960346222, 0.01875423640012741, 0.01886746846139431, 0.019702907651662827, 0.020827457308769226, 0.022387705743312836, 0.023504681885242462, 0.025162234902381897, 0.02579771913588047, 0.028641443699598312, 0.03121541067957878, 0.030736489221453667]], [[0.09730415046215057, 0.0771656185388565, 0.12199948728084564, 0.11586612462997437, 0.08972173929214478, 0.040366772562265396, 0.011979565024375916, 0.009390534833073616, 0.00879734382033348, 0.008782317861914635, 0.009375895373523235, 0.010608917102217674, 0.012067839503288269, 0.013165398500859737, 0.014448857866227627, 0.0156561192125082, 0.2683592736721039, 0.01723390817642212, 0.01697181910276413, 0.020102448761463165, 0.020635884255170822], [0.15637582540512085, 0.27660614252090454, 0.16686876118183136, 0.11809255182743073, 0.07176104187965393, 0.039821334183216095, 0.01639929786324501, 0.011343483813107014, 0.010283755138516426, 0.010881052352488041, 0.011159843765199184, 0.010673216544091702, 0.010154522955417633, 0.010859042406082153, 0.01180554274469614, 0.012641292065382004, 0.008917962200939655, 0.011898319236934185, 0.011463920585811138, 0.011089947074651718, 0.010903180576860905], [0.29674896597862244, 0.1804799884557724, 0.08649156242609024, 0.04112011194229126, 0.028784945607185364, 0.023259149864315987, 0.01930912584066391, 0.018168358132243156, 0.017649289220571518, 0.017602626234292984, 0.017749201506376266, 0.018613532185554504, 0.019756417721509933, 0.021288592368364334, 0.022397782653570175, 0.02408386953175068, 0.025472890585660934, 0.02833324484527111, 0.030700691044330597, 0.03033873438835144, 0.03165089339017868]], [[0.09680740535259247, 0.07653846591711044, 0.12153246253728867, 0.11520916223526001, 0.08902394771575928, 0.039771080017089844, 0.011427940800786018, 0.008742601610720158, 0.008167674764990807, 0.008190705440938473, 0.008801445364952087, 0.009994138963520527, 0.011312686838209629, 0.012232651002705097, 0.013289561495184898, 0.014325291849672794, 0.2670601010322571, 0.015789702534675598, 0.01555473543703556, 0.018493663519620895, 0.01894010417163372, 0.018794475123286247], [0.15583041310310364, 0.2728346288204193, 0.16355669498443604, 0.11568860709667206, 0.0703764259815216, 0.03936536982655525, 0.01640765555202961, 0.01141453068703413, 0.010343262925744057, 0.010905777104198933, 0.011155893094837666, 0.010681266896426678, 0.01018831692636013, 0.010899723507463932, 0.01181339006870985, 0.01264926977455616, 0.008998950943350792, 0.011865643784403801, 0.011436209082603455, 0.011080322787165642, 0.010911927558481693, 0.011595770716667175], [0.29122886061668396, 0.1793532818555832, 0.08469376713037491, 0.03936467319726944, 0.027262508869171143, 0.021947737783193588, 0.018249299377202988, 0.017186356708407402, 0.016702797263860703, 0.016671206802129745, 0.016808954998850822, 0.017623476684093475, 0.018697183579206467, 0.020132601261138916, 0.021168824285268784, 0.022762279957532883, 0.024143552407622337, 0.026940304785966873, 0.029063928872346878, 0.028772033751010895, 0.030016344040632248, 0.031210070475935936]], [[0.09764550626277924, 0.07648126035928726, 0.12131839990615845, 0.1137348935008049, 0.08767683804035187, 0.0390804186463356, 0.010844666510820389, 0.008292027749121189, 0.007871933281421661, 0.007910431362688541, 0.00842466950416565, 0.009436734020709991, 0.010594931431114674, 0.011468753218650818, 0.012442029081285, 0.01337176002562046, 0.2653636634349823, 0.014420227147638798, 0.014148000627756119, 0.01674416847527027, 0.017363838851451874, 0.017357822507619858, 0.01800698973238468], [0.15602809190750122, 0.268121600151062, 0.15792065858840942, 0.11112799495458603, 0.0677679106593132, 0.0384104885160923, 0.01626633293926716, 0.01149777416139841, 0.010455702431499958, 0.010978031903505325, 0.011163078248500824, 0.010719969868659973, 0.01030893437564373, 0.01110253669321537, 0.012018393725156784, 0.01288692094385624, 0.00965793151408434, 0.012488529086112976, 0.012045145034790039, 0.011710751801729202, 0.011584538966417313, 0.0123108746483922, 0.013427806086838245], [0.2830258011817932, 0.17601902782917023, 0.08205446600914001, 0.037053175270557404, 0.025367876514792442, 0.02046806551516056, 0.017142994329333305, 0.016131645068526268, 0.01565498113632202, 0.015646276995539665, 0.01578093320131302, 0.016570789739489555, 0.017612561583518982, 0.018979862332344055, 0.02001427486538887, 0.02158501371741295, 0.023728374391794205, 0.0268545001745224, 0.028694424778223038, 0.02857767418026924, 0.029847554862499237, 0.031061314046382904, 0.03212841600179672]], [[0.09928061813116074, 0.07714391499757767, 0.12116505205631256, 0.11142624914646149, 0.08568322658538818, 0.038507502526044846, 0.010637298226356506, 0.008082682266831398, 0.0076652346178889275, 0.007597396615892649, 0.007972409948706627, 0.00880658719688654, 0.009857083670794964, 0.01069339457899332, 0.011610187590122223, 0.01247264351695776, 0.2641254961490631, 0.01334317959845066, 0.013105977326631546, 0.015288748778402805, 0.01590004935860634, 0.01591719500720501, 0.016570504754781723, 0.01714734174311161], [0.15618273615837097, 0.26123830676078796, 0.15297290682792664, 0.10770493745803833, 0.06581056863069534, 0.037616077810525894, 0.016076548025012016, 0.011508679948747158, 0.010508967563509941, 0.011028043925762177, 0.011189659126102924, 0.010761909186840057, 0.010399384424090385, 0.01122474204748869, 0.012146138586103916, 0.013028088957071304, 0.010003486648201942, 0.012756763026118279, 0.012304591946303844, 0.011946696788072586, 0.011872230097651482, 0.012624307535588741, 0.013755334541201591, 0.015338857658207417], [0.2752864360809326, 0.1730562150478363, 0.07997707277536392, 0.035277027636766434, 0.02385656349360943, 0.019222794100642204, 0.016117757186293602, 0.015072348527610302, 0.014595845714211464, 0.014585832133889198, 0.014711115509271622, 0.015470385551452637, 0.016481250524520874, 0.017792273312807083, 0.01881556585431099, 0.020325463265180588, 0.023070957511663437, 0.026377081871032715, 0.027874264866113663, 0.02799420803785324, 0.02928757295012474, 0.030477244406938553, 0.03148261457681656, 0.03279205039143562]], [[0.09914375841617584, 0.07624921202659607, 0.12066295742988586, 0.11126573383808136, 0.08544623106718063, 0.038103051483631134, 0.01028008945286274, 0.0077249426394701, 0.007292578928172588, 0.00719959894195199, 0.007538650184869766, 0.008307593874633312, 0.009269991889595985, 0.010012321174144745, 0.01080254651606083, 0.011543579399585724, 0.263132780790329, 0.012313812971115112, 0.012157868593931198, 0.014166267588734627, 0.014710944145917892, 0.014713636599481106, 0.015280572697520256, 0.015799200162291527, 0.016882138326764107], [0.15469488501548767, 0.25756359100341797, 0.1491646021604538, 0.10490728914737701, 0.06421904265880585, 0.036902423948049545, 0.0157595407217741, 0.011274696327745914, 0.010246386751532555, 0.010716604068875313, 0.010853683575987816, 0.010476846247911453, 0.010162628255784512, 0.010982908308506012, 0.011849642731249332, 0.012714702636003494, 0.009901931509375572, 0.012625515460968018, 0.01223368663340807, 0.011892545968294144, 0.011822163127362728, 0.012553109787404537, 0.013671893626451492, 0.015228770673274994, 0.017580922693014145], [0.270719051361084, 0.1704830825328827, 0.07774947583675385, 0.03337126225233078, 0.022293850779533386, 0.017932582646608353, 0.015126314014196396, 0.014104614034295082, 0.01362759992480278, 0.01360863447189331, 0.01372291799634695, 0.014447338879108429, 0.015413403511047363, 0.016654513776302338, 0.0176488496363163, 0.019112417474389076, 0.022154172882437706, 0.025359466671943665, 0.026778120547533035, 0.02697838470339775, 0.028292382135987282, 0.029539942741394043, 0.030514582991600037, 0.03184688836336136, 0.0325201191008091]]];
        var y_action = [[[0.33690890669822693, 0.6629822850227356, 0.00010882383503485471], [0.0002323606313439086, 0.0005808342830277979, 0.9991868138313293]], [[0.009010463953018188, 0.9909895062446594, 6.15899580225232e-08], [0.006071391515433788, 0.993922233581543, 6.39867494101054e-06]], [[0.025371110066771507, 0.9746288657188416, 5.235454025864783e-08], [0.00019963926752097905, 0.9998003840446472, 6.727041590437466e-09]], [[0.07865264266729355, 0.9213471412658691, 1.7544682862080663e-07], [7.649770850548521e-05, 0.9999234676361084, 1.1139890121469875e-09]], [[0.12326082587242126, 0.8767385482788086, 6.553548246301943e-07], [9.411321661900729e-05, 0.9999058246612549, 2.238691232392398e-09]], [[0.13739760220050812, 0.8626010417938232, 1.3530375326809008e-06], [0.00013730618229601532, 0.9998626708984375, 4.61947990970657e-09]], [[0.06352902203798294, 0.9364700317382812, 1.018942271002743e-06], [0.00043565381201915443, 0.9995643496513367, 1.5078162718396015e-08]], [[0.06751200556755066, 0.9324874877929688, 5.4612928579445e-07], [0.0002847244613803923, 0.999715268611908, 8.00577115711576e-09]], [[0.04856443032622337, 0.9514352083206177, 3.4569484341773205e-07], [0.0003831228241324425, 0.9996168613433838, 1.1836849722612897e-08]], [[0.042267825454473495, 0.9577317833900452, 3.069838214742049e-07], [0.0004359896993264556, 0.999563992023468, 1.700117380210031e-08]], [[0.038738783448934555, 0.9612608551979065, 3.622281781190395e-07], [0.0005187940550968051, 0.9994812607765198, 2.8142350672055727e-08]], [[0.04897730052471161, 0.9510220885276794, 6.994355885581172e-07], [0.0005230173701420426, 0.999476969242096, 5.0530807982340775e-08]], [[0.07030685991048813, 0.9296917915344238, 1.3420039977063425e-06], [0.00044284798786975443, 0.9995569586753845, 6.852575040738884e-08]], [[0.16709768772125244, 0.8328937888145447, 8.514299224771094e-06], [0.00021061356528662145, 0.999789297580719, 9.30652319652836e-08]], [[0.42677322030067444, 0.5731531381607056, 7.367176294792444e-05], [6.17457990301773e-05, 0.9999382495880127, 5.7693675614700624e-08]], [[0.4129865765571594, 0.586741030216217, 0.0002723972429521382], [6.176528404466808e-05, 0.9999381303787231, 1.2699733531462698e-07]], [[0.8057680130004883, 0.1836172640323639, 0.010614791885018349], [0.006425563246011734, 5.212457381276181e-06, 0.9935692548751831]], [[0.9046737551689148, 0.07786460965871811, 0.017461692914366722], [0.0036700135096907616, 1.810005642255419e-06, 0.9963281750679016]], [[0.9453364014625549, 0.023930128663778305, 0.030733443796634674], [0.001701079891063273, 6.682457751594484e-07, 0.9982982277870178]], [[0.9078646898269653, 0.03941434621810913, 0.05272090062499046], [0.003477168269455433, 8.817376055958448e-07, 0.9965219497680664]], [[0.9012845754623413, 0.035301271826028824, 0.06341414898633957], [0.003887870581820607, 1.0400665360066341e-06, 0.9961110949516296]], [[0.864664614200592, 0.04148885980248451, 0.09384654462337494], [0.006181119009852409, 1.8093356857207255e-06, 0.9938170313835144]], [[0.8416001200675964, 0.03774460777640343, 0.12065517902374268], [0.008364181034266949, 3.111809974143398e-06, 0.9916327595710754]], [[0.7752615213394165, 0.0319734551012516, 0.1927650272846222], [0.01072591170668602, 4.514695774560096e-06, 0.9892695546150208]], [[0.6991451382637024, 0.040816694498062134, 0.2600381672382355], [0.013590740971267223, 1.1061085388064384e-05, 0.9863981604576111]], [[0.5728045105934143, 0.04934409260749817, 0.3778514266014099], [0.027064066380262375, 4.7841371269896626e-05, 0.9728881120681763]]]; // action probs
        var action =  [[1, 2], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [1, 1], [0, 1], [1, 1], [1, 2], [0, 2], [0, 2], [0, 2], [0, 2], [0, 2], [0, 2], [0, 2], [0, 2], [0, 2]];
        var action_names = [['no-op', 'left', 'right'], ['no-op', 'up', 'down']];
        var x_values = [...Array(y_values.length).keys()];

        var y_entropy_plot = [];
        var y_values_plot = [];

        // Set marker for plots
        var entropy_marker = false;
        var value_marker = false;

        // Set the to be shown statistic
        var statistic_type = 'general'
        // Only used for the transformer plot to show the correct statistic with tab switching
        var statistic_plot_id = 0;
        // Hide statistic type button if there is no attention weights
        if(y_attention_weights.length == 0) stats_button.style.display = 'none';

        // Set the to be shown action_space(s) for the entropy plot
        var entr_selected_action_space = null;

        var is_multi_discrete = action[0].length != 1;
        var is_discrete = action[0].length == 1;

        // Reformat the data for the plots
        // Each function y - value should be stored in a separate array
        for(var j = 0; j < y_values[0].length; j++)
            for(var i = 0; i < y_values.length; i++)
                y_values_plot.push(y_values[i][j]);

        if(is_discrete) { // If action_space is discrete
          for(var j = 0; j < y_entropy[0].length; j++)
              for(var i = 0; i < y_values.length; i++)
                  y_entropy_plot.push(y_entropy[i][j]);
        }
        else { // If action_space is multi discrete
          for(var j = 0; j < y_entropy[0].length; j++) {
            var y_entropy_vals = [];
            for(var i = 0; i < y_entropy.length; i++) {
                y_entropy_vals.push(y_entropy[i][j]);
            }
            y_entropy_plot.push(y_entropy_vals);
          }
        }

        // Set action_names for distr. plot if it does not exist
        if(action_names == null){
          action_names = [];
          for(var i = 0; i < y_action[0].length; i++){
            for(var j = 0; j < y_action[0][0].length; j++)
              if(is_discrete){ // if action space is discrete
                action_names.push("action_" + String(j));
            }
            else { // if action space is multi_discrete
              var action_branch_names = []; // Names of the branches of the action space
              for(var j = 0; j < y_action[0][i].length; j++){
                action_branch_names.push("action_" + String(j));
              }
              action_names.push(action_branch_names);
            }     
          }
        }
        else{
          if(action[0].length == 1 && Array.isArray(action_names[0])){ // If action space is discrete and action_names is multi_discrete
            action_names = action_names[0]; // Set action_names to the first branch of the action space
          }
        }

        // Modify dropdown menu
        if(is_discrete){ // if action space is discrete
          document.getElementById("all").outerHTML=""; // remove dropdown option 'all'
        }
        else { // If action space is multi_discrete
          // Create dropdown menu for the entropy function
          var dropdown_content = document.getElementById("dropdown_content"); 
          for(var i = 0; i < action[0].length; i++){
            var entropy_dropdown_option = document.createElement("a");
            entropy_dropdown_option.innerHTML = "action_space_" + String(i);
            entropy_dropdown_option.setAttribute("href", "#");
            entropy_dropdown_option.setAttribute("onclick", "set_action_space(" + String(i) + ")");
            dropdown_content.appendChild(entropy_dropdown_option);
          }
        }

        window.addEventListener('load', () => {
          // Set video length to length - 0.9999 because the last frame is two seconds long
          video_length = video_player.duration - 0.9999;
          time_selector.setAttribute('max', video_length); // Set max value of time selector to video length

          video_player.addEventListener('timeupdate', timeListener); // Update time selector and plots when video is playing
          video_player.addEventListener('dblclick', function(e) {open_fullscreen(video_player);}); // Open video in fullscreen when video is double clicked
          video_player.playbackRate = 6; // Set video playback rate to frame rate
          reset(); // Reset video to start
        }, false);
      
      // Update video time if time selector is changed
      time_selector.addEventListener('input', () => {
          video_player.currentTime = time_selector.value
          pause();
          update();
      })

      // Add event manager for tab
      window.addEventListener('keydown', function(event) {
          if (event.key === 'Tab') {
              if (statistic_type == "transformer") {
                statistic_plot_id = (statistic_plot_id + 1) % 3;
                // Set action plot if statistic_plot_id is 0
                if(statistic_plot_id == 0){
                  // Update action plot
                  if(is_discrete) { // If action_space is discrete
                    set_bar_action_plot(y_action[step][0], action[step][0], action_names);
                  }
                  else { // If action_space is multi discrete
                      set_stacked_bar_action_plot(y_action[step], action[step], action_names);
                  }
                }
                // Set value plot if statistic_plot_id is 1
                if (statistic_plot_id == 1) {
                  set_scatter_line_plot('action_distr', "Value Function", y_values_plot, step, value_marker);
                }

              // Set entropy plot if statistic_plot_id is 2
              if (statistic_plot_id == 2) {
                  if(is_discrete) { // If action_space is discrete
                      set_scatter_line_plot('action_distr', "Entropy Function", y_entropy_plot, step, entropy_marker);
                  }
                  else { // If action_space is multi discrete
                      set_scatter_lines_plot('action_distr', "Entropy Function", y_entropy_plot, step, entropy_marker);
                  }
              }
          }
      }
    });

    // Show ground truth if checkbox is checked
    function show_ground_truth() {
        // Get the checkbox element by its ID
        var checkbox = document.getElementById("show_ground_truth");
        
        // Check if the checkbox is checked
        if (checkbox.checked) { // Show the ground truth
          if (video_id == render_id) video_id = render_gt_id;
          if (video_id == render_decoder_id) video_id = render_decoder_gt_id;
          if (video_id == render_agent_id) video_id = render_agent_gt_id;
          set_video(video_path[video_id]);
        } else {
          if (video_id == render_gt_id) video_id = render_id;
          if (video_id == render_decoder_gt_id) video_id = render_decoder_id;
          if (video_id == render_agent_gt_id) video_id = render_agent_id;
          set_video(video_path[video_id]);
        }
      }

    // Show decoder video if checkbox is checked
    function show_decoder_video() {
      var checkbox = document.getElementById("show_decoder_video");
      document.getElementById("show_agent_video").checked = false;

      if (checkbox.checked) { 
          if (video_id == render_id) video_id = render_decoder_id;
          if (video_id == render_gt_id) video_id = render_decoder_gt_id;
          if (video_id == render_agent_id) video_id = render_decoder_id;
          if (video_id == render_agent_gt_id) video_id = render_decoder_gt_id;
          set_video(video_path[video_id]);
        } else { // Hide decoder video
          if (video_id == render_decoder_id) video_id = render_id;
          if (video_id == render_decoder_gt_id) video_id = render_gt_id;
          set_video(video_path[video_id]);
        }
    }

    // Show agent video if checkbox is checked
    function show_agent_video() {
      var checkbox = document.getElementById("show_agent_video");
      document.getElementById("show_decoder_video").checked  = false;

      if (checkbox.checked) { 
          if (video_id == render_id) video_id = render_agent_id;
          if (video_id == render_gt_id) video_id = render_agent_gt_id;
          if (video_id == render_decoder_id) video_id = render_agent_id;
          if (video_id == render_decoder_gt_id) video_id = render_agent_gt_id;
          set_video(video_path[video_id]);
        } else { // Hide agent video
          if (video_id == render_agent_id) video_id = render_id;
          if (video_id == render_agent_gt_id) video_id = render_gt_id;
          set_video(video_path[video_id]);
        }
    }

    // Set the video to the given path
    function set_video(path) {
        // Get video data to make the switch seamless
        var current_time = video_player.currentTime;
        var play_back_rate = video_player.playbackRate;
        var is_paused = video_player.paused;
        video_player.querySelector("source").src = path;
        // Reload video
        video_player.load();
        video_player.currentTime = current_time;
        video_player.playbackRate = play_back_rate;
        if(is_paused) pause();
        else play();
    }


      /**
      * Update time selector and plots when video is playing
      */
      function timeListener() {
        if(!video_player.paused) {
          update();
        } 
      }

      /**
      * Toggles button and video between playing and paused
      */
      function play_pause() {
        if(video_player.paused)
          play();
        else 
          pause();
      }

      /**
       * Returns to the previous frame step
       */
       function return_to_step() {
        video_player.currentTime = past_steps.pop();
        pause();
        update();
        gotostep_text.value = step;
        return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
       * Updates the plots and time selector
       */
       function go_to_step(event) {
        if (event.keyCode === 13) {
          past_steps.push(step);
          video_player.currentTime = Number(gotostep_text.value);
          pause();
          update();
          gotostep_text.value = step;
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
        }
      }

      function set_video_speed(event) {
        if (event.keyCode === 13) {
          video_player.playbackRate = Number(video_speed.value);
        }
      }

      /**
       * Updates the plots and time selector
       */
       function top_scores() {
        if (event.keyCode === 13) update()
      }

      /**
      * Pauses video
      */
      function pause() {
          play_pause_button.innerHTML = "Play";
          video_player.pause();
      }

      /**
      * Plays the video
      */
      function play() {
          play_pause_button.innerHTML = "Pause";
          video_player.play();
      }

      /**
      * Resets the video and plots to the start
      */
      function reset() {
          video_player.currentTime = 0;
          past_steps.push(step);
          pause();
          update();
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
      * Goes to the previous frame
      */
      function back() {
          video_player.currentTime = video_player.currentTime - tS_step_size
          pause();
          update();
          past_steps.push(step + 1);
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
      * Goes to the next frame
      */
      function next() {
          video_player.currentTime = video_player.currentTime + tS_step_size;
          pause();
          update();
          past_steps.push(step - 1);
          return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
      }

      /**
       * Switches between general and transformer statistics
       */
       function statistic() {
        if (stats_button.innerHTML == "General") {
          statistic_type = "general";
          stats_button.innerHTML = "Transformer";
        }
        else if (stats_button.innerHTML == "Transformer") {
          statistic_type = "transformer";
          stats_button.innerHTML = "General";
        }
        update();
      }
      /**
      * Opens the video in fullscreen
      */
      function open_fullscreen(vid_elem) {
          if (vid_elem.requestFullscreen) {
              vid_elem.requestFullscreen();
          } else if (vid_elem.webkitRequestFullscreen) { /* Safari */
              vid_elem.webkitRequestFullscreen();
          } else if (vid_elem.msRequestFullscreen) { /* IE11 */
              vid_elem.msRequestFullscreen();
          }
          vid_elem.pause();
      }

      // Selects the action space for the entropy plot
      function set_action_space(spaces){
        if (spaces == 'all')
          entr_selected_action_space = null;
        else
          entr_selected_action_space = Number(spaces);
        update();
      }

      function marker(marker_id){
        if(marker_id == "entropy")
          entropy_marker = !entropy_marker;
        else if(marker_id == "value")
          value_marker = !value_marker;
        update();
      }

      /**
      * Updates the plots and time selector
      */
      function update()  {
        if(video_player.currentTime == Math.round(video_player.currentTime)) // If time t of video is a natural number then step is t - 1
              video_player.currentTime += 0.0001 // Add a small number to make sure that the step and the current time are the same
        if(video_player.currentTime > video_length) {
           video_player.currentTime = video_length;
           pause();
        } // Video can't go past the end
        time_selector.value = video_player.currentTime; // Update time selector
        step = Math.floor(video_player.currentTime); // Get step of video for plots

        // Update plots
        if (statistic_type == "general")
          render_general_statistics();
        else if (statistic_type == "transformer")
          render_transformer_statistics();

        if(statistic_type == "general") {
          // Reset plot id
          statistic_plot_id = 0;
          // Update action plot
          if(is_discrete) { // If action_space is discrete
            set_bar_action_plot(y_action[step][0], action[step][0], action_names);
          }
          else { // If action_space is multi discrete
              set_stacked_bar_action_plot(y_action[step], action[step], action_names);
          }
        }
      }

      /**
      * Renders the general statistics
      */
      function render_general_statistics() {
        // Disables the transformer statistics and enables the general statistics
          document.getElementById('transformer').style.display = 'none';
          document.getElementById('top_n_scores').style.display = 'none';
          document.querySelector('label[for="top_n_scores"]').style.display = 'none';
          document.getElementById('value_func').style.display = 'block';
          document.getElementById('entropy_func').style.display = 'block';
          document.getElementById('options').style.display = 'block';
        // Updates the plots
          set_scatter_line_plot('value_func', "Value Function", y_values_plot, step, value_marker);
          if(is_discrete) { // If action_space is discrete
              set_scatter_line_plot('entropy_func', "Entropy Function", y_entropy_plot, step, entropy_marker);
          }
          else { // If action_space is multi discrete
              set_scatter_lines_plot('entropy_func', "Entropy Function", y_entropy_plot, step, entropy_marker);
          }
        }
      
      /*
      * Renders the transformer statistics
      */
      function render_transformer_statistics() {
        // Disables the general statistics and enables the transformer statistics
        document.getElementById('transformer').style.display = 'block';
        document.getElementById('top_n_scores').style.display = 'block';
        document.querySelector('label[for="top_n_scores"]').style.display = 'block';
        document.getElementById('value_func').style.display = 'none';
        document.getElementById('entropy_func').style.display = 'none';
        document.getElementById('options').style.display = 'none';
        // Updates the plots
        var top_n = Number(top_n_scores.value);
        if (top_n == -1) top_n = step;
        visualizeAttentionScores(y_attention_weights[step], top_n);
        }


      /**
       * Renders attention scores
      */
      async function visualizeAttentionScores(attentionScores, n_values) {
        const numHeads = attentionScores.length;
        
        let data = [];
        let layout = {
          grid: {
              rows: numHeads, 
              columns: 1, 
              pattern: 'independent',
              subplots: [...Array(numHeads).keys()].map(i => `xy${i + 1}`),
              ygap: 0.4 // adjust this value according to your preference
          },
          plot_bgcolor: '#000',
          paper_bgcolor: '#000',
          font: {
              family: 'Montserrat',
              size: 12,
              color: '#fff'
          },
          margin: {
              t: 0,  // reduce top margin
          },
      }

        // Flatten the array to find the max value across all arrays
        let flatScores = attentionScores.flat();
        let maxScore = Math.max(...flatScores);

        // Iterate through each attention head
        for (let headIdx = 0; headIdx < numHeads; headIdx++) {
            // Get attention scores for the current head
            let headScores = attentionScores[headIdx];
            
            // This array will keep up to the 10 highest scores
            let topScores = [];

            for (let i = 0; i < headScores.length; i++) {
                // Insert current score into the top scores array
                topScores.push({score: headScores[i], index: i});
                
                // Sort the top scores array
                topScores.sort((a, b) => b.score - a.score);

                // If there are more than 10 scores, remove the smallest
                if (topScores.length > n_values) {
                    topScores.pop();
                }
            }

            // Sort the topScores array by index
            topScores.sort((a, b) => a.index - b.index);

            // Now topScores contains the top 10 scores sorted by their indices.
            // You can extract the scores and their indices into separate arrays:
            let filteredHeadScores = topScores.map(x => x.score);
            let filteredTicks = topScores.map(x => x.index);


            const sequenceLength = filteredHeadScores.length;

            layout.height = 400;
            layout.width = window.innerWidth;

            const headScoresPlot = {
                z: [filteredHeadScores],
                type: 'heatmap',
                showscale: true,  
                colorscale: 'Hot',
                zmin: 0,
                zmax: maxScore,
                xaxis: `x${headIdx + 1}`,
                yaxis: `y${headIdx + 1}`,
            };

            data.push(headScoresPlot);

            layout[`xaxis${headIdx + 1}`] = {
                tickmode: 'array',
                tickvals: Array.from({length: sequenceLength}, (_, i) => i),
                ticktext: filteredTicks
            };

            layout[`yaxis${headIdx + 1}`] = {
                title: `Block ${headIdx + 1}`,
                ticks: 'outside',
                tick0: 0,
                dtick: 1,
                ticklen: 8,
                tickwidth: 4,
                tickcolor: '#000'
            };
        }

        const config = {responsive: true};

        Plotly.newPlot('transformer', data, layout, config).then(function() {
          var myPlot = document.getElementById('transformer');
          myPlot.on('plotly_click', function(data){
            // Jump to the step that was clicked
              past_steps.push(step);
              video_player.currentTime = Number(data.points[0].xaxis.ticktext[data.points[0].x]);
              pause();
              update();
              return_button.innerHTML = "Return to step " + past_steps[past_steps.length - 1]; 
          });
      });
    }

      /** 
      * Sets a stacked bar plot for the multi discrete action distribution
      * @param {array} y_values - The action distribution
      * @param {array} action - The action
      * @param {array} action_names - The names of the actions
      */
      function set_stacked_bar_action_plot(y_values, action, action_names) {
        var bar_plot_data_action = [];
        // Set data for each action
        for(var j = 0; j < action_names[0].length; j++) {
            var color = ""
            for(var i = 0; i < action_names.length; i++) {
                if(action[i] == j) // If action sampled in the current frame
                    color = '#FF0000'; // Color it red
                else
                    color = '#FAEBD7'; // Color it white
                var trace = {
                    x: [["action_space_", String(i)].join("")],
                    y: [y_values[i][j]],
                    text: [y_values[i][j], action_names[i][j]].map(String).join("<br>"), // Add action name and prob to the bar
                    marker: {
                        color: color,
                        line: {
                            color: '#000000',
                            width: 1
                          }
                    },
                    type: 'bar'
                };
                bar_plot_data_action.push(trace);
            }
        }

        // Set layout for the plot
        var bar_plot_layout_action = {
            autosize: true,
            width: 600,
            height: 360,
            margin: {
                l: 28,
                r: 0,
                b: 30,
                t: 22,
                pad: 4
              },
            plot_bgcolor: '#000',
            paper_bgcolor: '#000',
            font: {
                family: 'Montserrat',
                size: 12,
                color: '#fff'
            },
            title: {
                text: 'Action Distribution',
                font: {
                    family: 'Montserrat',
                    size: 15,
                    color: '#fff'
                }
            },
            barmode: 'stack',
            showlegend: false
      };

      // Plot the data
      Plotly.newPlot('action_distr', bar_plot_data_action, bar_plot_layout_action);
      }

      /**
      * Sets a bar plot for the discrete action distribution
      */
      function set_bar_action_plot(y_values, action, action_names) {

          var color_value = new Array(y_values.length).fill('#FAEBD7'); // Set color for all actions to white
          color_value[action] = '#FF0000'; // Except the selected action should be red
          // Set data for the plot
          var bar_plot_data_action = [
              {
                  x: action_names,
                  y: y_values,
                  type: 'bar',
                  marker: {
                      color: color_value
                  },
                  textposition: 'auto',
                  text: y_values.map(String), // Add prob to the bar plot
                  textfont: {
                      family: 'Montserrat',
                      size: 12,
                  },
                  textangle: 0,
                  textposition: 'bottom center',
              }
          ];

          // Set layout for the plot
          var bar_plot_layout_action = {
            autosize: true,
            width: 600,
            height: 360,
            margin: {
                l: 28,
                r: 0,
                b: 30,
                t: 22,
                pad: 4
              },
            yaxis: {
              automargin: true,
            },
            plot_bgcolor: '#000',
            paper_bgcolor: '#000',
            font: {
                family: 'Montserrat',
                size: 12,
                color: '#fff'
            },
            title: {
                text: 'Action Distribution',
                font: {
                    family: 'Montserrat',
                    size: 15,
                    color: '#fff'
                }
            }
      };
          
          // Plot the action distribution
          Plotly.newPlot('action_distr', bar_plot_data_action, bar_plot_layout_action);
      }


      /**
      * Sets a scatter plot for the emtropy function if multi discrete actions are used
      * @param {string} id - The id of the plot
      * @param {string} title - The title of the plot
      * @param {array} y_values - The entropy function y values
      * @param {int} step - The step of the video
      * @param {boolean} marker - If the marker should be shown
      */
      function set_scatter_lines_plot(id, title, y_values, step, marker) {
        line_scatter_plot_data_value = [];

        // Set colors and data for the plot
        var colors = ['#FAEBD780', '#7CFC0080', '#FFBF0080', '#FF7F5080', '#DE316380', '#9FE2BF80', '#40E0D080', '#6495ED80', '#CCCCFF80']
        for(var i = 0; i < y_values.length; i++) {
          var x_values_marker = x_values.slice(0, step + 1);
          var y_values_marker = y_values[i].slice(0, step + 1);
            var trace = [
            {
                x: x_values_marker,
                y: y_values_marker,
                mode: 'line',
                line: {
                    color: colors[i]
                },
                name: 'action_space_' + String(i),
                showlegend: true,
            },
            {
                x: x_values,
                y: y_values[i],
                mode: 'markers',
                name: 'action_space_' + String(i) + "_marker",
                marker: {
                    color: colors[i]
                },
                showlegend: true,
            }
        ];
            // Add data to the plot
            line_scatter_plot_data_value.push(trace[0]);
            if(marker)
              line_scatter_plot_data_value.push(trace[1]); 
        }

        // Select the selected action_space for the entropy plot
        if(entr_selected_action_space != null && marker)
          line_scatter_plot_data_value = [line_scatter_plot_data_value[entr_selected_action_space * 2], line_scatter_plot_data_value[entr_selected_action_space * 2 + 1]];
        else if(entr_selected_action_space != null && !marker)
          line_scatter_plot_data_value = [line_scatter_plot_data_value[entr_selected_action_space]];

        // Set layout for the plot
        var line__scatter_plot_layout_value = {
            autosize: true,
            width: 600,
            height: 360,
            margin: {
                l: 50,
                r: 0,
                b: 30,
                t: 25,
                pad: 4
                },
            yaxis: {
                automargin: true
            },
            plot_bgcolor: '#000',
            paper_bgcolor: '#000',
            font: {
                family: 'Montserrat',
                size: 12,
                color: '#fff'
            },
            title: {
                text: title,
                font: {
                    family: 'Montserrat',
                    size: 15,
                    color: '#fff'
                }
            },
            showlegend: true,
        };

        // Plot the data
        Plotly.newPlot(id, line_scatter_plot_data_value, line__scatter_plot_layout_value);
      }


      /**
      * Sets a scatter plot for the value function
      * @param {string} id - The id of the plot
      * @param {string} title - The title of the plot
      * @param {array} y_values - The value function y values
      * @param {int} step - The step of the video
      * @param {boolean} marker - If the marker should be shown
      */
      function set_scatter_line_plot(id, title, y_values, step, marker) {
          // Set data for layout for the plot
          var line__scatter_plot_layout_value = {
              autosize: true,
              width: 600,
              height: 360,
              margin: {
                  l: 50,
                  r: 0,
                  b: 30,
                  t: 25,
                  pad: 4
                  },
              yaxis: {
                  automargin: true
              },
              plot_bgcolor: '#000',
              paper_bgcolor: '#000',
              font: {
                  family: 'Montserrat',
                  size: 12,
                  color: '#fff'
              },
              title: {
                  text: title,
                  font: {
                      family: 'Montserrat',
                      size: 15,
                      color: '#fff'
                  }
              },
              showlegend: false,
          };

          // Set data for the plot
          var x_values_marker = x_values.slice(0, step + 1);
          var y_values_marker = y_values.slice(0, step + 1);

          var line_scatter_plot_data_value = [
              {
                  x: x_values_marker,
                  y: y_values_marker,
                  mode: 'line',
                  line: {
                      color: '#FAEBD7'
                  },
                  name: 'function',
              },
              {
                  x: x_values,
                  y: y_values,
                  mode: 'markers',
                  marker: {
                      color: '#7CFC0080'
                  },
                  name: 'marker',
              }
          ];

          if(!marker)
            line_scatter_plot_data_value = [line_scatter_plot_data_value[0]];

          // Plot the value function
          Plotly.newPlot(id, line_scatter_plot_data_value, line__scatter_plot_layout_value);
      }
    
    /**
    * Opens the specific tab based on the probided id
    * @param {string} id - The id of the tab
    */
    function openTab(evt, id) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        mediatabcontent = document.getElementsByClassName("mediatabcontent");
        // Hide all elements with class="tabcontent" and "mediacontent" by default
        for (i = 0; i < mediatabcontent.length; i++) {
            mediatabcontent[i].style.display = "none";
        }
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        // Show the specific tab content
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(id).style.display = "block";
        evt.currentTarget.className += " active";
      }
    </script>
  </body>
</html>